(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery"], factory)
    } else {
        factory(jQuery)
    }
})(function($) {
    var pluses = /\+/g;

    function raw(s) {
        return s
    }

    function decoded(s) {
        return decodeURIComponent(s.replace(pluses, " "))
    }

    function converted(s) {
        if (s.indexOf('"') === 0) {
            s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\")
        }
        try {
            return config.json ? JSON.parse(s) : s
        } catch (er) {}
    }
    var config = $.cookie = function(key, value, options) {
        if (value !== undefined) {
            options = $.extend({}, config.defaults, options);
            if (typeof options.expires === "number") {
                var days = options.expires,
                    t = options.expires = new Date;
                t.setDate(t.getDate() + days)
            }
            value = config.json ? JSON.stringify(value) : String(value);
            return document.cookie = [config.raw ? key : encodeURIComponent(key), "=", config.raw ? value : encodeURIComponent(value), options.expires ? "; expires=" + options.expires.toUTCString() : "", options.path ? "; path=" + options.path : "", options.domain ? "; domain=" + options.domain : "", options.secure ? "; secure" : ""].join("")
        }
        var decode = config.raw ? raw : decoded;
        var cookies = document.cookie.split("; ");
        var result = key ? undefined : {};
        for (var i = 0, l = cookies.length; i < l; i++) {
            var parts = cookies[i].split("=");
            var name = decode(parts.shift());
            var cookie = decode(parts.join("="));
            if (key && key === name) {
                result = converted(cookie);
                break
            }
            if (!key) {
                result[name] = converted(cookie)
            }
        }
        return result
    };
    config.defaults = {};
    $.removeCookie = function(key, options) {
        if ($.cookie(key) !== undefined) {
            $.cookie(key, "", $.extend({}, options, {
                expires: -1
            }));
            return true
        }
        return false
    }
});
(function($) {
    var pluginName = "placeholderEnhanced",
        hasNativeSupport = "placeholder" in document.createElement("input") && "placeholder" in document.createElement("textarea"),
        events = {
            focus: "focus.placeholder",
            blur: "blur.placeholder",
            submit: "submit.placeholder"
        },
        defaults = {
            className: "placeholder"
        },
        inputsSelector = "input[placeholder], textarea[placeholder]",
        $val;
    if (!hasNativeSupport) {
        $val = $.fn.val;
        $.fn.val = function() {
            if (!this.length) {
                return
            }
            if (!arguments.length && (this[0].nodeName === "INPUT" || this[0].nodeName === "TEXTAREA")) {
                return this[0].value === this.attr("placeholder") ? "" : this[0].value
            } else {
                if (this.hasClass(defaults.className)) {
                    this.removeClass(defaults.className)
                }
                return $val.apply(this, arguments)
            }
        }
    }

    function PlaceholderEnhanced(element, options) {
        $.data(element, pluginName, this);
        this.el = element;
        this.$el = $(this.el);
        this.placeholderTxt = this.$el.attr("placeholder");
        this.isPassword = this.el.type === "password";
        this.options = $.extend(defaults, options);
        this.init()
    }

    function copyAttrs(element) {
        var attrs = {},
            exclude = ["placeholder", "name", "id"];
        $.each(element.attributes, function(i, attr) {
            if (attr.specified && $.inArray(attr.name, exclude) < 0) {
                attrs[attr.name] = attr.value
            }
        });
        return attrs
    }

    function hideInput($input) {
        $input.css({
            position: "absolute",
            left: "-9999em"
        })
    }

    function showInput($input) {
        $input.css({
            position: "",
            left: ""
        })
    }
    PlaceholderEnhanced.prototype.init = function() {
        var that = this,
            placeholderTxt = that.placeholderTxt,
            isPassword = that.isPassword,
            fakePassw;

        function removePlaceholder() {
            if (that.$el.hasClass(that.options.className)) {
                if (!hasNativeSupport) {
                    that.el.value = ""
                }
                that.$el.removeClass(that.options.className)
            }
        }

        function setPlaceholder() {
            if (!that.$el.val()) {
                if (!hasNativeSupport) {
                    if (!isPassword) {
                        that.$el.val(placeholderTxt).addClass(that.options.className)
                    } else {
                        showInput(fakePassw);
                        hideInput(that.$el)
                    }
                } else {
                    that.$el.addClass(that.options.className)
                }
            }
        }
        if (!isPassword || hasNativeSupport) {
            that.$el.bind(events.focus, removePlaceholder)
        } else {
            fakePassw = $("<input>", $.extend(copyAttrs(that.el), {
                type: "text",
                value: placeholderTxt,
                tabindex: -1
            })).addClass(that.options.className).bind(events.focus, function() {
                that.$el.trigger(events.focus)
            }).insertBefore(that.$el);
            that.$el.bind(events.focus, function() {
                showInput(that.$el);
                hideInput(fakePassw)
            })
        }
        that.$el.bind(events.blur, setPlaceholder).trigger(events.blur)
    };
    $.fn[pluginName] = function(options) {
        if (!this.length) {
            return
        }
        if (!hasNativeSupport) {
            $("form").filter(function() {
                return !$.data(this, pluginName)
            }).each(function() {
                $(this).bind(events.submit, function() {
                    $(this).find(inputsSelector).each(function() {
                        if (!$(this).val() && !this.disabled) {
                            this.value = ""
                        }
                    })
                });
                $.data(this, pluginName, true)
            })
        }
        return this.each(function() {
            if (!$.data(this, pluginName)) {
                new PlaceholderEnhanced(this, options)
            }
        })
    };
    $(function() {
        $(inputsSelector).placeholderEnhanced()
    })
})(jQuery);
(function(omq) {
    omq.init = function(query_array) {
        this._callbacks = [];
        this._context = "";
        this._last_context = "";
        if (typeof query_array !== "undefined") {
            for (var i = 0, l = query_array.length; i < l; i++) {
                this.addQuery(query_array[i])
            }
        }
        _addEvent(window, "resize", _listenForChange, omq);
        _listenForChange.call(this)
    };
    omq.addQuery = function(query_object) {
        if (query_object) {
            this._callbacks.push(query_object);
            if (typeof query_object.context === "string") {
                query_object.context = [query_object.context]
            }
            if (typeof query_object.call_for_each_context !== "boolean") {
                query_object.call_for_each_context = true
            }
            if (this._last_context && _inArray(this._last_context, query_object.context)) {
                query_object.match()
            }
            return this._callbacks[this._callbacks.length - 1]
        }
    };
    omq.removeQuery = function(query_object) {
        if (query_object) {
            var match = -1;
            while ((match = this._callbacks.indexOf(query_object)) > -1) {
                this._callbacks.splice(match, 1)
            }
        }
    };
    omq.getContext = function() {
        return this._context ? this._context : _pickContext()
    };
    omq.getLastContext = function() {
        return this._last_context ? this._last_context : this._context
    };

    function _listenForChange() {
        var query_string = _pickContext();
        if (query_string) {
            if (query_string !== this._last_context) {
                this._context = query_string;
                _triggerCallbacks.call(this, this._last_context, "unmatch");
                _triggerCallbacks.call(this, this._context, "match")
            }
            this._last_context = this._context
        }
    }

    function _triggerCallbacks(size, key) {
        if (size && key) {
            var callback_function;
            for (var i = 0, l = this._callbacks.length; i < l; i++) {
                if (this._callbacks[i].call_for_each_context === false) {
                    if (key === "match" && _inArray(this._last_context, this._callbacks[i].context) || key === "unmatch" && _inArray(this._context, this._callbacks[i].context)) {
                        continue
                    }
                }
                callback_function = this._callbacks[i][key];
                if (_inArray(size, this._callbacks[i].context) && callback_function !== undefined) {
                    callback_function()
                }
            }
        }
    }

    function _addEvent(elem, type, eventHandle, eventContext) {
        if (elem) {
            if (elem.addEventListener) {
                elem.addEventListener(type, function() {
                    eventHandle.call(eventContext)
                }, false)
            } else if (elem.attachEvent) {
                elem.attachEvent("on" + type, function() {
                    eventHandle.call(eventContext)
                })
            } else {
                elem["on" + type] = function() {
                    eventHandle.call(eventContext)
                }
            }
        }
    }

    function _pickContext() {
        var pick = _contentAfter(document.body) || _fontFamily(document.documentElement);
        return pick.replace(/['",]/g, "")
    }

    function _inArray(needle, haystack) {
        for (var i = 0, l = haystack.length; i < l; i++) {
            if (haystack[i] == needle) {
                return true
            }
        }
        return false
    }

    function _fontFamily(elem) {
        if (elem) {
            return elem.currentStyle ? elem.currentStyle["fontFamily"] : window.getComputedStyle ? window.getComputedStyle(elem).getPropertyValue("font-family") : ""
        }
    }

    function _contentAfter(elem) {
        if (elem) {
            return window.getComputedStyle ? window.getComputedStyle(elem, ":after").getPropertyValue("content") : ""
        }
    }
    return omq
})(window.oMQ = window.oMQ || {});
jQuery.easing["jswing"] = jQuery.easing["swing"];
jQuery.extend(jQuery.easing, {
    def: "easeOutQuad",
    swing: function(x, t, b, c, d) {
        return jQuery.easing[jQuery.easing.def](x, t, b, c, d)
    },
    easeInQuad: function(x, t, b, c, d) {
        return c * (t /= d) * t + b
    },
    easeOutQuad: function(x, t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b
    },
    easeInOutQuad: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t + b;
        return -c / 2 * (--t * (t - 2) - 1) + b
    },
    easeInCubic: function(x, t, b, c, d) {
        return c * (t /= d) * t * t + b
    },
    easeOutCubic: function(x, t, b, c, d) {
        return c * ((t = t / d - 1) * t * t + 1) + b
    },
    easeInOutCubic: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t + 2) + b
    },
    easeInQuart: function(x, t, b, c, d) {
        return c * (t /= d) * t * t * t + b
    },
    easeOutQuart: function(x, t, b, c, d) {
        return -c * ((t = t / d - 1) * t * t * t - 1) + b
    },
    easeInOutQuart: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
        return -c / 2 * ((t -= 2) * t * t * t - 2) + b
    },
    easeInQuint: function(x, t, b, c, d) {
        return c * (t /= d) * t * t * t * t + b
    },
    easeOutQuint: function(x, t, b, c, d) {
        return c * ((t = t / d - 1) * t * t * t * t + 1) + b
    },
    easeInOutQuint: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b
    },
    easeInSine: function(x, t, b, c, d) {
        return -c * Math.cos(t / d * (Math.PI / 2)) + c + b
    },
    easeOutSine: function(x, t, b, c, d) {
        return c * Math.sin(t / d * (Math.PI / 2)) + b
    },
    easeInOutSine: function(x, t, b, c, d) {
        return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b
    },
    easeInExpo: function(x, t, b, c, d) {
        return t == 0 ? b : c * Math.pow(2, 10 * (t / d - 1)) + b
    },
    easeOutExpo: function(x, t, b, c, d) {
        return t == d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b
    },
    easeInOutExpo: function(x, t, b, c, d) {
        if (t == 0) return b;
        if (t == d) return b + c;
        if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b
    },
    easeInCirc: function(x, t, b, c, d) {
        return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b
    },
    easeOutCirc: function(x, t, b, c, d) {
        return c * Math.sqrt(1 - (t = t / d - 1) * t) + b
    },
    easeInOutCirc: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b
    },
    easeInElastic: function(x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * 2 * Math.PI / p)) + b
    },
    easeOutElastic: function(x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * 2 * Math.PI / p) + c + b
    },
    easeInOutElastic: function(x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d / 2) == 2) return b + c;
        if (!p) p = d * .3 * 1.5;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        if (t < 1) return -.5 * a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * 2 * Math.PI / p) + b;
        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * 2 * Math.PI / p) * .5 + c + b
    },
    easeInBack: function(x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * (t /= d) * t * ((s + 1) * t - s) + b
    },
    easeOutBack: function(x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b
    },
    easeInOutBack: function(x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        if ((t /= d / 2) < 1) return c / 2 * t * t * (((s *= 1.525) + 1) * t - s) + b;
        return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b
    },
    easeInBounce: function(x, t, b, c, d) {
        return c - jQuery.easing.easeOutBounce(x, d - t, 0, c, d) + b
    },
    easeOutBounce: function(x, t, b, c, d) {
        if ((t /= d) < 1 / 2.75) {
            return c * 7.5625 * t * t + b
        } else if (t < 2 / 2.75) {
            return c * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + b
        } else if (t < 2.5 / 2.75) {
            return c * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + b
        } else {
            return c * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + b
        }
    },
    easeInOutBounce: function(x, t, b, c, d) {
        if (t < d / 2) return jQuery.easing.easeInBounce(x, t * 2, 0, c, d) * .5 + b;
        return jQuery.easing.easeOutBounce(x, t * 2 - d, 0, c, d) * .5 + c * .5 + b
    }
});
(function($) {
    $.flexslider = function(el, options) {
        var slider = $(el),
            vars = $.extend({}, $.flexslider.defaults, options),
            namespace = vars.namespace,
            touch = "ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch,
            eventType = touch ? "touchend" : "click",
            vertical = vars.direction === "vertical",
            reverse = vars.reverse,
            carousel = vars.itemWidth > 0,
            fade = vars.animation === "fade",
            asNav = vars.asNavFor !== "",
            methods = {};
        $.data(el, "flexslider", slider);
        methods = {
            init: function() {
                slider.animating = false;
                slider.currentSlide = vars.startAt;
                slider.animatingTo = slider.currentSlide;
                slider.atEnd = slider.currentSlide === 0 || slider.currentSlide === slider.last;
                slider.containerSelector = vars.selector.substr(0, vars.selector.search(" "));
                slider.slides = $(vars.selector, slider);
                slider.container = $(slider.containerSelector, slider);
                slider.count = slider.slides.length;
                slider.syncExists = $(vars.sync).length > 0;
                if (vars.animation === "slide") vars.animation = "swing";
                slider.prop = vertical ? "top" : "marginLeft";
                slider.args = {};
                slider.manualPause = false;
                slider.transitions = !vars.video && !fade && vars.useCSS && function() {
                    var obj = document.createElement("div"),
                        props = ["perspectiveProperty", "WebkitPerspective", "MozPerspective", "OPerspective", "msPerspective"];
                    for (var i in props) {
                        if (obj.style[props[i]] !== undefined) {
                            slider.pfx = props[i].replace("Perspective", "").toLowerCase();
                            slider.prop = "-" + slider.pfx + "-transform";
                            return true
                        }
                    }
                    return false
                }();
                if (vars.controlsContainer !== "") slider.controlsContainer = $(vars.controlsContainer).length > 0 && $(vars.controlsContainer);
                if (vars.manualControls !== "") slider.manualControls = $(vars.manualControls).length > 0 && $(vars.manualControls);
                if (vars.randomize) {
                    slider.slides.sort(function() {
                        return Math.round(Math.random()) - .5
                    });
                    slider.container.empty().append(slider.slides)
                }
                slider.doMath();
                if (asNav) methods.asNav.setup();
                slider.setup("init");
                if (vars.controlNav) methods.controlNav.setup();
                if (vars.directionNav) methods.directionNav.setup();
                if (vars.keyboard && ($(slider.containerSelector).length === 1 || vars.multipleKeyboard)) {
                    $(document).bind("keyup", function(event) {
                        var keycode = event.keyCode;
                        if (!slider.animating && (keycode === 39 || keycode === 37)) {
                            var target = keycode === 39 ? slider.getTarget("next") : keycode === 37 ? slider.getTarget("prev") : false;
                            slider.flexAnimate(target, vars.pauseOnAction)
                        }
                    })
                }
                if (vars.mousewheel) {
                    slider.bind("mousewheel", function(event, delta, deltaX, deltaY) {
                        event.preventDefault();
                        var target = delta < 0 ? slider.getTarget("next") : slider.getTarget("prev");
                        slider.flexAnimate(target, vars.pauseOnAction)
                    })
                }
                if (vars.pausePlay) methods.pausePlay.setup();
                if (vars.slideshow) {
                    if (vars.pauseOnHover) {
                        slider.hover(function() {
                            if (!slider.manualPlay && !slider.manualPause) slider.pause()
                        }, function() {
                            if (!slider.manualPause && !slider.manualPlay) slider.play()
                        })
                    }
                    vars.initDelay > 0 ? setTimeout(slider.play, vars.initDelay) : slider.play()
                }
                if (touch && vars.touch) methods.touch();
                if (!fade || fade && vars.smoothHeight) $(window).bind("resize focus", methods.resize);
                setTimeout(function() {
                    vars.start(slider)
                }, 200)
            },
            asNav: {
                setup: function() {
                    slider.asNav = true;
                    slider.animatingTo = Math.floor(slider.currentSlide / slider.move);
                    slider.currentItem = slider.currentSlide;
                    slider.slides.removeClass(namespace + "active-slide").eq(slider.currentItem).addClass(namespace + "active-slide");
                    slider.slides.click(function(e) {
                        e.preventDefault();
                        var $slide = $(this),
                            target = $slide.index();
                        if (!$(vars.asNavFor).data("flexslider").animating && !$slide.hasClass("active")) {
                            slider.direction = slider.currentItem < target ? "next" : "prev";
                            slider.flexAnimate(target, vars.pauseOnAction, false, true, true)
                        }
                    })
                }
            },
            controlNav: {
                setup: function() {
                    if (!slider.manualControls) {
                        methods.controlNav.setupPaging()
                    } else {
                        methods.controlNav.setupManual()
                    }
                },
                setupPaging: function() {
                    var type = vars.controlNav === "thumbnails" ? "control-thumbs" : "control-paging",
                        j = 1,
                        item;
                    slider.controlNavScaffold = $('<ol class="' + namespace + "control-nav " + namespace + type + '"></ol>');
                    if (slider.pagingCount > 1) {
                        for (var i = 0; i < slider.pagingCount; i++) {
                            item = vars.controlNav === "thumbnails" ? '<img src="' + slider.slides.eq(i).attr("data-thumb") + '"/>' : "<a>" + j + "</a>";
                            slider.controlNavScaffold.append("<li>" + item + "</li>");
                            j++
                        }
                    }
                    slider.controlsContainer ? $(slider.controlsContainer).append(slider.controlNavScaffold) : slider.append(slider.controlNavScaffold);
                    methods.controlNav.set();
                    methods.controlNav.active();
                    slider.controlNavScaffold.delegate("a, img", eventType, function(event) {
                        event.preventDefault();
                        var $this = $(this),
                            target = slider.controlNav.index($this);
                        if (!$this.hasClass(namespace + "active")) {
                            slider.direction = target > slider.currentSlide ? "next" : "prev";
                            slider.flexAnimate(target, vars.pauseOnAction)
                        }
                    });
                    if (touch) {
                        slider.controlNavScaffold.delegate("a", "click touchstart", function(event) {
                            event.preventDefault()
                        })
                    }
                },
                setupManual: function() {
                    slider.controlNav = slider.manualControls;
                    methods.controlNav.active();
                    slider.controlNav.live(eventType, function(event) {
                        event.preventDefault();
                        var $this = $(this),
                            target = slider.controlNav.index($this);
                        if (!$this.hasClass(namespace + "active")) {
                            target > slider.currentSlide ? slider.direction = "next" : slider.direction = "prev";
                            slider.flexAnimate(target, vars.pauseOnAction)
                        }
                    });
                    if (touch) {
                        slider.controlNav.live("click touchstart", function(event) {
                            event.preventDefault()
                        })
                    }
                },
                set: function() {
                    var selector = vars.controlNav === "thumbnails" ? "img" : "a";
                    slider.controlNav = $("." + namespace + "control-nav li " + selector, slider.controlsContainer ? slider.controlsContainer : slider)
                },
                active: function() {
                    slider.controlNav.removeClass(namespace + "active").eq(slider.animatingTo).addClass(namespace + "active")
                },
                update: function(action, pos) {
                    if (slider.pagingCount > 1 && action === "add") {
                        slider.controlNavScaffold.append($("<li><a>" + slider.count + "</a></li>"))
                    } else if (slider.pagingCount === 1) {
                        slider.controlNavScaffold.find("li").remove()
                    } else {
                        slider.controlNav.eq(pos).closest("li").remove()
                    }
                    methods.controlNav.set();
                    slider.pagingCount > 1 && slider.pagingCount !== slider.controlNav.length ? slider.update(pos, action) : methods.controlNav.active()
                }
            },
            directionNav: {
                setup: function() {
                    var directionNavScaffold = $('<ul class="' + namespace + 'direction-nav"><li><a class="' + namespace + 'prev" href="#">' + vars.prevText + '</a></li><li><a class="' + namespace + 'next" href="#">' + vars.nextText + "</a></li></ul>");
                    if (slider.controlsContainer) {
                        $(slider.controlsContainer).append(directionNavScaffold);
                        slider.directionNav = $("." + namespace + "direction-nav li a", slider.controlsContainer)
                    } else {
                        slider.append(directionNavScaffold);
                        slider.directionNav = $("." + namespace + "direction-nav li a", slider)
                    }
                    methods.directionNav.update();
                    slider.directionNav.bind(eventType, function(event) {
                        event.preventDefault();
                        var target = $(this).hasClass(namespace + "next") ? slider.getTarget("next") : slider.getTarget("prev");
                        slider.flexAnimate(target, vars.pauseOnAction)
                    });
                    if (touch) {
                        slider.directionNav.bind("click touchstart", function(event) {
                            event.preventDefault()
                        })
                    }
                },
                update: function() {
                    var disabledClass = namespace + "disabled";
                    if (slider.pagingCount === 1) {
                        slider.directionNav.addClass(disabledClass)
                    } else if (!vars.animationLoop) {
                        if (slider.animatingTo === 0) {
                            slider.directionNav.removeClass(disabledClass).filter("." + namespace + "prev").addClass(disabledClass)
                        } else if (slider.animatingTo === slider.last) {
                            slider.directionNav.removeClass(disabledClass).filter("." + namespace + "next").addClass(disabledClass)
                        } else {
                            slider.directionNav.removeClass(disabledClass)
                        }
                    } else {
                        slider.directionNav.removeClass(disabledClass)
                    }
                }
            },
            pausePlay: {
                setup: function() {
                    var pausePlayScaffold = $('<div class="' + namespace + 'pauseplay"><a></a></div>');
                    if (slider.controlsContainer) {
                        slider.controlsContainer.append(pausePlayScaffold);
                        slider.pausePlay = $("." + namespace + "pauseplay a", slider.controlsContainer)
                    } else {
                        slider.append(pausePlayScaffold);
                        slider.pausePlay = $("." + namespace + "pauseplay a", slider)
                    }
                    methods.pausePlay.update(vars.slideshow ? namespace + "pause" : namespace + "play");
                    slider.pausePlay.bind(eventType, function(event) {
                        event.preventDefault();
                        if ($(this).hasClass(namespace + "pause")) {
                            slider.manualPause = true;
                            slider.manualPlay = false;
                            slider.pause()
                        } else {
                            slider.manualPause = false;
                            slider.manualPlay = true;
                            slider.play()
                        }
                    });
                    if (touch) {
                        slider.pausePlay.bind("click touchstart", function(event) {
                            event.preventDefault()
                        })
                    }
                },
                update: function(state) {
                    state === "play" ? slider.pausePlay.removeClass(namespace + "pause").addClass(namespace + "play").text(vars.playText) : slider.pausePlay.removeClass(namespace + "play").addClass(namespace + "pause").text(vars.pauseText)
                }
            },
            touch: function() {
                var startX, startY, offset, cwidth, dx, startT, scrolling = false;
                el.addEventListener("touchstart", onTouchStart, false);

                function onTouchStart(e) {
                    if (slider.animating) {
                        e.preventDefault()
                    } else if (e.touches.length === 1) {
                        slider.pause();
                        cwidth = vertical ? slider.h : slider.w;
                        startT = Number(new Date);
                        offset = carousel && reverse && slider.animatingTo === slider.last ? 0 : carousel && reverse ? slider.limit - (slider.itemW + vars.itemMargin) * slider.move * slider.animatingTo : carousel && slider.currentSlide === slider.last ? slider.limit : carousel ? (slider.itemW + vars.itemMargin) * slider.move * slider.currentSlide : reverse ? (slider.last - slider.currentSlide + slider.cloneOffset) * cwidth : (slider.currentSlide + slider.cloneOffset) * cwidth;
                        startX = vertical ? e.touches[0].pageY : e.touches[0].pageX;
                        startY = vertical ? e.touches[0].pageX : e.touches[0].pageY;
                        el.addEventListener("touchmove", onTouchMove, false);
                        el.addEventListener("touchend", onTouchEnd, false)
                    }
                }

                function onTouchMove(e) {
                    dx = vertical ? startX - e.touches[0].pageY : startX - e.touches[0].pageX;
                    scrolling = vertical ? Math.abs(dx) < Math.abs(e.touches[0].pageX - startY) : Math.abs(dx) < Math.abs(e.touches[0].pageY - startY);
                    if (!scrolling || Number(new Date) - startT > 500) {
                        e.preventDefault();
                        if (!fade && slider.transitions) {
                            if (!vars.animationLoop) {
                                dx = dx / (slider.currentSlide === 0 && dx < 0 || slider.currentSlide === slider.last && dx > 0 ? Math.abs(dx) / cwidth + 2 : 1)
                            }
                            slider.setProps(offset + dx, "setTouch")
                        }
                    }
                }

                function onTouchEnd(e) {
                    el.removeEventListener("touchmove", onTouchMove, false);
                    if (slider.animatingTo === slider.currentSlide && !scrolling && !(dx === null)) {
                        var updateDx = reverse ? -dx : dx,
                            target = updateDx > 0 ? slider.getTarget("next") : slider.getTarget("prev");
                        if (slider.canAdvance(target) && (Number(new Date) - startT < 550 && Math.abs(updateDx) > 50 || Math.abs(updateDx) > cwidth / 2)) {
                            slider.flexAnimate(target, vars.pauseOnAction)
                        } else {
                            if (!fade) slider.flexAnimate(slider.currentSlide, vars.pauseOnAction, true)
                        }
                    }
                    el.removeEventListener("touchend", onTouchEnd, false);
                    startX = null;
                    startY = null;
                    dx = null;
                    offset = null
                }
            },
            resize: function() {
                if (!slider.animating && slider.is(":visible")) {
                    if (!carousel) slider.doMath();
                    if (fade) {
                        methods.smoothHeight()
                    } else if (carousel) {
                        slider.slides.width(slider.computedW);
                        slider.update(slider.pagingCount);
                        slider.setProps()
                    } else if (vertical) {
                        slider.viewport.height(slider.h);
                        slider.setProps(slider.h, "setTotal")
                    } else {
                        if (vars.smoothHeight) methods.smoothHeight();
                        slider.newSlides.width(slider.computedW);
                        slider.setProps(slider.computedW, "setTotal")
                    }
                }
            },
            smoothHeight: function(dur) {
                if (!vertical || fade) {
                    var $obj = fade ? slider : slider.viewport;
                    dur ? $obj.animate({
                        height: slider.slides.eq(slider.animatingTo).height()
                    }, dur) : $obj.height(slider.slides.eq(slider.animatingTo).height())
                }
            },
            sync: function(action) {
                var $obj = $(vars.sync).data("flexslider"),
                    target = slider.animatingTo;
                switch (action) {
                    case "animate":
                        $obj.flexAnimate(target, vars.pauseOnAction, false, true);
                        break;
                    case "play":
                        if (!$obj.playing && !$obj.asNav) {
                            $obj.play()
                        }
                        break;
                    case "pause":
                        $obj.pause();
                        break
                }
            }
        };
        slider.flexAnimate = function(target, pause, override, withSync, fromNav) {
            if (asNav && slider.pagingCount === 1) slider.direction = slider.currentItem < target ? "next" : "prev";
            if (!slider.animating && (slider.canAdvance(target, fromNav) || override) && slider.is(":visible")) {
                if (asNav && withSync) {
                    var master = $(vars.asNavFor).data("flexslider");
                    slider.atEnd = target === 0 || target === slider.count - 1;
                    master.flexAnimate(target, true, false, true, fromNav);
                    slider.direction = slider.currentItem < target ? "next" : "prev";
                    master.direction = slider.direction;
                    if (Math.ceil((target + 1) / slider.visible) - 1 !== slider.currentSlide && target !== 0) {
                        slider.currentItem = target;
                        slider.slides.removeClass(namespace + "active-slide").eq(target).addClass(namespace + "active-slide");
                        target = Math.floor(target / slider.visible)
                    } else {
                        slider.currentItem = target;
                        slider.slides.removeClass(namespace + "active-slide").eq(target).addClass(namespace + "active-slide");
                        return false
                    }
                }
                slider.animating = true;
                slider.animatingTo = target;
                vars.before(slider);
                if (pause) slider.pause();
                if (slider.syncExists && !fromNav) methods.sync("animate");
                if (vars.controlNav) methods.controlNav.active();
                if (!carousel) slider.slides.removeClass(namespace + "active-slide").eq(target).addClass(namespace + "active-slide");
                slider.atEnd = target === 0 || target === slider.last;
                if (vars.directionNav) methods.directionNav.update();
                if (target === slider.last) {
                    vars.end(slider);
                    if (!vars.animationLoop) slider.pause()
                }
                if (!fade) {
                    var dimension = vertical ? slider.slides.filter(":first").height() : slider.computedW,
                        margin, slideString, calcNext;
                    if (carousel) {
                        margin = vars.itemWidth > slider.w ? vars.itemMargin * 2 : vars.itemMargin;
                        calcNext = (slider.itemW + margin) * slider.move * slider.animatingTo;
                        slideString = calcNext > slider.limit && slider.visible !== 1 ? slider.limit : calcNext
                    } else if (slider.currentSlide === 0 && target === slider.count - 1 && vars.animationLoop && slider.direction !== "next") {
                        slideString = reverse ? (slider.count + slider.cloneOffset) * dimension : 0
                    } else if (slider.currentSlide === slider.last && target === 0 && vars.animationLoop && slider.direction !== "prev") {
                        slideString = reverse ? 0 : (slider.count + 1) * dimension
                    } else {
                        slideString = reverse ? (slider.count - 1 - target + slider.cloneOffset) * dimension : (target + slider.cloneOffset) * dimension
                    }
                    slider.setProps(slideString, "", vars.animationSpeed);
                    if (slider.transitions) {
                        if (!vars.animationLoop || !slider.atEnd) {
                            slider.animating = false;
                            slider.currentSlide = slider.animatingTo
                        }
                        slider.container.unbind("webkitTransitionEnd transitionend");
                        slider.container.bind("webkitTransitionEnd transitionend", function() {
                            slider.wrapup(dimension)
                        })
                    } else {
                        slider.container.animate(slider.args, vars.animationSpeed, vars.easing, function() {
                            slider.wrapup(dimension)
                        })
                    }
                } else {
                    if (!touch) {
                        slider.slides.eq(slider.currentSlide).fadeOut(vars.animationSpeed, vars.easing);
                        slider.slides.eq(target).fadeIn(vars.animationSpeed, vars.easing, slider.wrapup)
                    } else {
                        slider.slides.eq(slider.currentSlide).css({
                            opacity: 0,
                            zIndex: 1
                        });
                        slider.slides.eq(target).css({
                            opacity: 1,
                            zIndex: 2
                        });
                        slider.animating = false;
                        slider.currentSlide = slider.animatingTo
                    }
                }
                if (vars.smoothHeight) methods.smoothHeight(vars.animationSpeed)
            }
        };
        slider.wrapup = function(dimension) {
            if (!fade && !carousel) {
                if (slider.currentSlide === 0 && slider.animatingTo === slider.last && vars.animationLoop) {
                    slider.setProps(dimension, "jumpEnd")
                } else if (slider.currentSlide === slider.last && slider.animatingTo === 0 && vars.animationLoop) {
                    slider.setProps(dimension, "jumpStart")
                }
            }
            slider.animating = false;
            slider.currentSlide = slider.animatingTo;
            vars.after(slider)
        };
        slider.animateSlides = function() {
            if (!slider.animating) slider.flexAnimate(slider.getTarget("next"))
        };
        slider.pause = function() {
            clearInterval(slider.animatedSlides);
            slider.playing = false;
            if (vars.pausePlay) methods.pausePlay.update("play");
            if (slider.syncExists) methods.sync("pause")
        };
        slider.play = function() {
            slider.animatedSlides = setInterval(slider.animateSlides, vars.slideshowSpeed);
            slider.playing = true;
            if (vars.pausePlay) methods.pausePlay.update("pause");
            if (slider.syncExists) methods.sync("play")
        };
        slider.canAdvance = function(target, fromNav) {
            var last = asNav ? slider.pagingCount - 1 : slider.last;
            return fromNav ? true : asNav && slider.currentItem === slider.count - 1 && target === 0 && slider.direction === "prev" ? true : asNav && slider.currentItem === 0 && target === slider.pagingCount - 1 && slider.direction !== "next" ? false : target === slider.currentSlide && !asNav ? false : vars.animationLoop ? true : slider.atEnd && slider.currentSlide === 0 && target === last && slider.direction !== "next" ? false : slider.atEnd && slider.currentSlide === last && target === 0 && slider.direction === "next" ? false : true
        };
        slider.getTarget = function(dir) {
            slider.direction = dir;
            if (dir === "next") {
                return slider.currentSlide === slider.last ? 0 : slider.currentSlide + 1
            } else {
                return slider.currentSlide === 0 ? slider.last : slider.currentSlide - 1
            }
        };
        slider.setProps = function(pos, special, dur) {
            var target = function() {
                var posCheck = pos ? pos : (slider.itemW + vars.itemMargin) * slider.move * slider.animatingTo,
                    posCalc = function() {
                        if (carousel) {
                            return special === "setTouch" ? pos : reverse && slider.animatingTo === slider.last ? 0 : reverse ? slider.limit - (slider.itemW + vars.itemMargin) * slider.move * slider.animatingTo : slider.animatingTo === slider.last ? slider.limit : posCheck
                        } else {
                            switch (special) {
                                case "setTotal":
                                    return reverse ? (slider.count - 1 - slider.currentSlide + slider.cloneOffset) * pos : (slider.currentSlide + slider.cloneOffset) * pos;
                                case "setTouch":
                                    return reverse ? pos : pos;
                                case "jumpEnd":
                                    return reverse ? pos : slider.count * pos;
                                case "jumpStart":
                                    return reverse ? slider.count * pos : pos;
                                default:
                                    return pos
                            }
                        }
                    }();
                return posCalc * -1 + "px"
            }();
            if (slider.transitions) {
                target = vertical ? "translate3d(0," + target + ",0)" : "translate3d(" + target + ",0,0)";
                dur = dur !== undefined ? dur / 1e3 + "s" : "0s";
                slider.container.css("-" + slider.pfx + "-transition-duration", dur)
            }
            slider.args[slider.prop] = target;
            if (slider.transitions || dur === undefined) slider.container.css(slider.args)
        };
        slider.setup = function(type) {
            if (!fade) {
                var sliderOffset, arr;
                if (type === "init") {
                    slider.viewport = $('<div class="' + namespace + 'viewport"></div>').css({
                        overflow: "hidden",
                        position: "relative"
                    }).appendTo(slider).append(slider.container);
                    slider.cloneCount = 0;
                    slider.cloneOffset = 0;
                    if (reverse) {
                        arr = $.makeArray(slider.slides).reverse();
                        slider.slides = $(arr);
                        slider.container.empty().append(slider.slides)
                    }
                }
                if (vars.animationLoop && !carousel) {
                    slider.cloneCount = 2;
                    slider.cloneOffset = 1;
                    if (type !== "init") slider.container.find(".clone").remove();
                    slider.container.append(slider.slides.first().clone().addClass("clone")).prepend(slider.slides.last().clone().addClass("clone"))
                }
                slider.newSlides = $(vars.selector, slider);
                sliderOffset = reverse ? slider.count - 1 - slider.currentSlide + slider.cloneOffset : slider.currentSlide + slider.cloneOffset;
                if (vertical && !carousel) {
                    slider.container.height((slider.count + slider.cloneCount) * 200 + "%").css("position", "absolute").width("100%");
                    setTimeout(function() {
                        slider.newSlides.css({
                            display: "block"
                        });
                        slider.doMath();
                        slider.viewport.height(slider.h);
                        slider.setProps(sliderOffset * slider.h, "init")
                    }, type === "init" ? 100 : 0)
                } else {
                    slider.container.width((slider.count + slider.cloneCount) * 200 + "%");
                    slider.setProps(sliderOffset * slider.computedW, "init");
                    setTimeout(function() {
                        slider.doMath();
                        slider.newSlides.css({
                            width: slider.computedW,
                            "float": "left",
                            display: "block"
                        });
                        if (vars.smoothHeight) methods.smoothHeight()
                    }, type === "init" ? 100 : 0)
                }
            } else {
                slider.slides.css({
                    width: "100%",
                    "float": "left",
                    marginRight: "-100%",
                    position: "relative"
                });
                if (type === "init") {
                    if (!touch) {
                        slider.slides.eq(slider.currentSlide).fadeIn(vars.animationSpeed, vars.easing)
                    } else {
                        slider.slides.css({
                            opacity: 0,
                            display: "block",
                            webkitTransition: "opacity " + vars.animationSpeed / 1e3 + "s ease",
                            zIndex: 1
                        }).eq(slider.currentSlide).css({
                            opacity: 1,
                            zIndex: 2
                        })
                    }
                }
                if (vars.smoothHeight) methods.smoothHeight()
            }
            if (!carousel) slider.slides.removeClass(namespace + "active-slide").eq(slider.currentSlide).addClass(namespace + "active-slide")
        };
        slider.doMath = function() {
            var slide = slider.slides.first(),
                slideMargin = vars.itemMargin,
                minItems = vars.minItems,
                maxItems = vars.maxItems;
            slider.w = slider.width();
            slider.h = slide.height();
            slider.boxPadding = slide.outerWidth() - slide.width();
            if (carousel) {
                slider.itemT = vars.itemWidth + slideMargin;
                slider.minW = minItems ? minItems * slider.itemT : slider.w;
                slider.maxW = maxItems ? maxItems * slider.itemT : slider.w;
                slider.itemW = slider.minW > slider.w ? (slider.w - slideMargin * minItems) / minItems : slider.maxW < slider.w ? (slider.w - slideMargin * maxItems) / maxItems : vars.itemWidth > slider.w ? slider.w : vars.itemWidth;
                slider.visible = Math.floor(slider.w / (slider.itemW + slideMargin));
                slider.move = vars.move > 0 && vars.move < slider.visible ? vars.move : slider.visible;
                slider.pagingCount = Math.ceil((slider.count - slider.visible) / slider.move + 1);
                slider.last = slider.pagingCount - 1;
                slider.limit = slider.pagingCount === 1 ? 0 : vars.itemWidth > slider.w ? (slider.itemW + slideMargin * 2) * slider.count - slider.w - slideMargin : (slider.itemW + slideMargin) * slider.count - slider.w - slideMargin
            } else {
                slider.itemW = slider.w;
                slider.pagingCount = slider.count;
                slider.last = slider.count - 1
            }
            slider.computedW = slider.itemW - slider.boxPadding
        };
        slider.update = function(pos, action) {
            slider.doMath();
            if (!carousel) {
                if (pos < slider.currentSlide) {
                    slider.currentSlide += 1
                } else if (pos <= slider.currentSlide && pos !== 0) {
                    slider.currentSlide -= 1
                }
                slider.animatingTo = slider.currentSlide
            }
            if (vars.controlNav && !slider.manualControls) {
                if (action === "add" && !carousel || slider.pagingCount > slider.controlNav.length) {
                    methods.controlNav.update("add")
                } else if (action === "remove" && !carousel || slider.pagingCount < slider.controlNav.length) {
                    if (carousel && slider.currentSlide > slider.last) {
                        slider.currentSlide -= 1;
                        slider.animatingTo -= 1
                    }
                    methods.controlNav.update("remove", slider.last)
                }
            }
            if (vars.directionNav) methods.directionNav.update()
        };
        slider.addSlide = function(obj, pos) {
            var $obj = $(obj);
            slider.count += 1;
            slider.last = slider.count - 1;
            if (vertical && reverse) {
                pos !== undefined ? slider.slides.eq(slider.count - pos).after($obj) : slider.container.prepend($obj)
            } else {
                pos !== undefined ? slider.slides.eq(pos).before($obj) : slider.container.append($obj)
            }
            slider.update(pos, "add");
            slider.slides = $(vars.selector + ":not(.clone)", slider);
            slider.setup();
            vars.added(slider)
        };
        slider.removeSlide = function(obj) {
            var pos = isNaN(obj) ? slider.slides.index($(obj)) : obj;
            slider.count -= 1;
            slider.last = slider.count - 1;
            if (isNaN(obj)) {
                $(obj, slider.slides).remove()
            } else {
                vertical && reverse ? slider.slides.eq(slider.last).remove() : slider.slides.eq(obj).remove()
            }
            slider.doMath();
            slider.update(pos, "remove");
            slider.slides = $(vars.selector + ":not(.clone)", slider);
            slider.setup();
            vars.removed(slider)
        };
        methods.init()
    };
    $.flexslider.defaults = {
        namespace: "flex-",
        selector: ".slides > li",
        animation: "fade",
        easing: "swing",
        direction: "horizontal",
        reverse: false,
        animationLoop: true,
        smoothHeight: false,
        startAt: 0,
        slideshow: true,
        slideshowSpeed: 7e3,
        animationSpeed: 600,
        initDelay: 0,
        randomize: false,
        pauseOnAction: true,
        pauseOnHover: false,
        useCSS: true,
        touch: true,
        video: false,
        controlNav: true,
        directionNav: true,
        prevText: "Previous",
        nextText: "Next",
        keyboard: true,
        multipleKeyboard: false,
        mousewheel: false,
        pausePlay: false,
        pauseText: "Pause",
        playText: "Play",
        controlsContainer: "",
        manualControls: "",
        sync: "",
        asNavFor: "",
        itemWidth: 0,
        itemMargin: 0,
        minItems: 0,
        maxItems: 0,
        move: 0,
        start: function() {},
        before: function() {},
        after: function() {},
        end: function() {},
        added: function() {},
        removed: function() {}
    };
    $.fn.flexslider = function(options) {
        if (options === undefined) options = {};
        if (typeof options === "object") {
            return this.each(function() {
                var $this = $(this),
                    selector = options.selector ? options.selector : ".slides > li",
                    $slides = $this.find(selector);
                if ($slides.length === 1) {
                    $slides.fadeIn(400);
                    if (options.start) options.start($this)
                } else if ($this.data("flexslider") === undefined) {
                    new $.flexslider(this, options)
                }
            })
        } else {
            var $slider = $(this).data("flexslider");
            switch (options) {
                case "play":
                    $slider.play();
                    break;
                case "pause":
                    $slider.pause();
                    break;
                case "next":
                    $slider.flexAnimate($slider.getTarget("next"), true);
                    break;
                case "prev":
                case "previous":
                    $slider.flexAnimate($slider.getTarget("prev"), true);
                    break;
                default:
                    if (typeof options === "number") $slider.flexAnimate(options, true)
            }
        }
    }
})(jQuery);
(function(window, $, undefined) {
    "use strict";
    var $event = $.event,
        dispatchMethod = $.event.handle ? "handle" : "dispatch",
        resizeTimeout;
    $event.special.smartresize = {
        setup: function() {
            $(this).bind("resize", $event.special.smartresize.handler)
        },
        teardown: function() {
            $(this).unbind("resize", $event.special.smartresize.handler)
        },
        handler: function(event, execAsap) {
            var context = this,
                args = arguments;
            event.type = "smartresize";
            if (resizeTimeout) {
                clearTimeout(resizeTimeout)
            }
            resizeTimeout = setTimeout(function() {
                $event[dispatchMethod].apply(context, args)
            }, execAsap === "execAsap" ? 0 : 100)
        }
    };
    $.fn.smartresize = function(fn) {
        return fn ? this.bind("smartresize", fn) : this.trigger("smartresize", ["execAsap"])
    };
    $.Mason = function(options, element) {
        this.element = $(element);
        this._create(options);
        this._init()
    };
    $.Mason.settings = {
        isResizable: true,
        isAnimated: false,
        animationOptions: {
            queue: false,
            duration: 500
        },
        gutterWidth: 0,
        isRTL: false,
        isFitWidth: false,
        containerStyle: {
            position: "relative"
        }
    };
    $.Mason.prototype = {
        _filterFindBricks: function($elems) {
            var selector = this.options.itemSelector;
            return !selector ? $elems : $elems.filter(selector).add($elems.find(selector))
        },
        _getBricks: function($elems) {
            var $bricks = this._filterFindBricks($elems).css({
                position: "absolute"
            }).addClass("masonry-brick");
            return $bricks
        },
        _create: function(options) {
            this.options = $.extend(true, {}, $.Mason.settings, options);
            this.styleQueue = [];
            var elemStyle = this.element[0].style;
            this.originalStyle = {
                height: elemStyle.height || ""
            };
            var containerStyle = this.options.containerStyle;
            for (var prop in containerStyle) {
                this.originalStyle[prop] = elemStyle[prop] || ""
            }
            this.element.css(containerStyle);
            this.horizontalDirection = this.options.isRTL ? "right" : "left";
            var x = this.element.css("padding-" + this.horizontalDirection);
            var y = this.element.css("padding-top");
            this.offset = {
                x: x ? parseInt(x, 10) : 0,
                y: y ? parseInt(y, 10) : 0
            };
            this.isFluid = this.options.columnWidth && typeof this.options.columnWidth === "function";
            var instance = this;
            setTimeout(function() {
                instance.element.addClass("masonry")
            }, 0);
            if (this.options.isResizable) {
                $(window).bind("smartresize.masonry", function() {
                    instance.resize()
                })
            }
            this.reloadItems()
        },
        _init: function(callback) {
            this._getColumns();
            this._reLayout(callback)
        },
        option: function(key, value) {
            if ($.isPlainObject(key)) {
                this.options = $.extend(true, this.options, key)
            }
        },
        layout: function($bricks, callback) {
            for (var i = 0, len = $bricks.length; i < len; i++) {
                this._placeBrick($bricks[i])
            }
            var containerSize = {};
            containerSize.height = Math.max.apply(Math, this.colYs);
            if (this.options.isFitWidth) {
                var unusedCols = 0;
                i = this.cols;
                while (--i) {
                    if (this.colYs[i] !== 0) {
                        break
                    }
                    unusedCols++
                }
                containerSize.width = (this.cols - unusedCols) * this.columnWidth - this.options.gutterWidth
            }
            this.styleQueue.push({
                $el: this.element,
                style: containerSize
            });
            var styleFn = !this.isLaidOut ? "css" : this.options.isAnimated ? "animate" : "css",
                animOpts = this.options.animationOptions;
            var obj;
            for (i = 0, len = this.styleQueue.length; i < len; i++) {
                obj = this.styleQueue[i];
                obj.$el[styleFn](obj.style, animOpts)
            }
            this.styleQueue = [];
            if (callback) {
                callback.call($bricks)
            }
            this.isLaidOut = true
        },
        _getColumns: function() {
            var container = this.options.isFitWidth ? this.element.parent() : this.element,
                containerWidth = container.width();
            this.columnWidth = this.isFluid ? this.options.columnWidth(containerWidth) : this.options.columnWidth || this.$bricks.outerWidth(true) || containerWidth;
            this.columnWidth += this.options.gutterWidth;
            this.cols = Math.floor((containerWidth + this.options.gutterWidth) / this.columnWidth);
            this.cols = Math.max(this.cols, 1)
        },
        _placeBrick: function(brick) {
            var $brick = $(brick),
                colSpan, groupCount, groupY, groupColY, j;
            colSpan = Math.ceil($brick.outerWidth(true) / this.columnWidth);
            colSpan = Math.min(colSpan, this.cols);
            if (colSpan === 1) {
                groupY = this.colYs
            } else {
                groupCount = this.cols + 1 - colSpan;
                groupY = [];
                for (j = 0; j < groupCount; j++) {
                    groupColY = this.colYs.slice(j, j + colSpan);
                    groupY[j] = Math.max.apply(Math, groupColY)
                }
            }
            var minimumY = Math.min.apply(Math, groupY),
                shortCol = 0;
            for (var i = 0, len = groupY.length; i < len; i++) {
                if (groupY[i] === minimumY) {
                    shortCol = i;
                    break
                }
            }
            var position = {
                top: minimumY + this.offset.y
            };
            position[this.horizontalDirection] = this.columnWidth * shortCol + this.offset.x;
            this.styleQueue.push({
                $el: $brick,
                style: position
            });
            var setHeight = minimumY + $brick.outerHeight(true),
                setSpan = this.cols + 1 - len;
            for (i = 0; i < setSpan; i++) {
                this.colYs[shortCol + i] = setHeight
            }
        },
        resize: function() {
            var prevColCount = this.cols;
            this._getColumns();
            if (this.isFluid || this.cols !== prevColCount) {
                this._reLayout()
            }
        },
        _reLayout: function(callback) {
            var i = this.cols;
            this.colYs = [];
            while (i--) {
                this.colYs.push(0)
            }
            this.layout(this.$bricks, callback)
        },
        reloadItems: function() {
            this.$bricks = this._getBricks(this.element.children())
        },
        reload: function(callback) {
            this.reloadItems();
            this._init(callback)
        },
        appended: function($content, isAnimatedFromBottom, callback) {
            if (isAnimatedFromBottom) {
                this._filterFindBricks($content).css({
                    top: this.element.height()
                });
                var instance = this;
                setTimeout(function() {
                    instance._appended($content, callback)
                }, 1)
            } else {
                this._appended($content, callback)
            }
        },
        _appended: function($content, callback) {
            var $newBricks = this._getBricks($content);
            this.$bricks = this.$bricks.add($newBricks);
            this.layout($newBricks, callback)
        },
        remove: function($content) {
            this.$bricks = this.$bricks.not($content);
            $content.remove()
        },
        destroy: function() {
            this.$bricks.removeClass("masonry-brick").each(function() {
                this.style.position = "";
                this.style.top = "";
                this.style.left = ""
            });
            var elemStyle = this.element[0].style;
            for (var prop in this.originalStyle) {
                elemStyle[prop] = this.originalStyle[prop]
            }
            this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");
            $(window).unbind(".masonry")
        }
    };
    $.fn.imagesLoaded = function(callback) {
        var $this = this,
            $images = $this.find("img").add($this.filter("img")),
            len = $images.length,
            blank = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",
            loaded = [];

        function triggerCallback() {
            callback.call($this, $images)
        }

        function imgLoaded(event) {
            var img = event.target;
            if (img.src !== blank && $.inArray(img, loaded) === -1) {
                loaded.push(img);
                if (--len <= 0) {
                    setTimeout(triggerCallback);
                    $images.unbind(".imagesLoaded", imgLoaded)
                }
            }
        }
        if (!len) {
            triggerCallback()
        }
        $images.bind("load.imagesLoaded error.imagesLoaded", imgLoaded).each(function() {
            var src = this.src;
            this.src = blank;
            this.src = src
        });
        return $this
    };
    var logError = function(message) {
        if (window.console) {
            window.console.error(message)
        }
    };
    $.fn.masonry = function(options) {
        if (typeof options === "string") {
            var args = Array.prototype.slice.call(arguments, 1);
            this.each(function() {
                var instance = $.data(this, "masonry");
                if (!instance) {
                    logError("cannot call methods on masonry prior to initialization; " + "attempted to call method '" + options + "'");
                    return
                }
                if (!$.isFunction(instance[options]) || options.charAt(0) === "_") {
                    logError("no such method '" + options + "' for masonry instance");
                    return
                }
                instance[options].apply(instance, args)
            })
        } else {
            this.each(function() {
                var instance = $.data(this, "masonry");
                if (instance) {
                    instance.option(options || {});
                    instance._init()
                } else {
                    $.data(this, "masonry", new $.Mason(options, this))
                }
            })
        }
        return this
    }
})(window, jQuery);
(function(e) {
    "use strict";

    function t() {}

    function n(e, t) {
        if (r) return t.indexOf(e);
        for (var n = t.length; n--;)
            if (t[n] === e) return n;
        return -1
    }
    var i = t.prototype,
        r = Array.prototype.indexOf ? !0 : !1;
    i._getEvents = function() {
        return this._events || (this._events = {})
    }, i.getListeners = function(e) {
        var t, n, i = this._getEvents();
        if ("object" == typeof e) {
            t = {};
            for (n in i) i.hasOwnProperty(n) && e.test(n) && (t[n] = i[n])
        } else t = i[e] || (i[e] = []);
        return t
    }, i.getListenersAsObject = function(e) {
        var t, n = this.getListeners(e);
        return n instanceof Array && (t = {}, t[e] = n), t || n
    }, i.addListener = function(e, t) {
        var i, r = this.getListenersAsObject(e);
        for (i in r) r.hasOwnProperty(i) && -1 === n(t, r[i]) && r[i].push(t);
        return this
    }, i.on = i.addListener, i.defineEvent = function(e) {
        return this.getListeners(e), this
    }, i.defineEvents = function(e) {
        for (var t = 0; e.length > t; t += 1) this.defineEvent(e[t]);
        return this
    }, i.removeListener = function(e, t) {
        var i, r, s = this.getListenersAsObject(e);
        for (r in s) s.hasOwnProperty(r) && (i = n(t, s[r]), -1 !== i && s[r].splice(i, 1));
        return this
    }, i.off = i.removeListener, i.addListeners = function(e, t) {
        return this.manipulateListeners(!1, e, t)
    }, i.removeListeners = function(e, t) {
        return this.manipulateListeners(!0, e, t)
    }, i.manipulateListeners = function(e, t, n) {
        var i, r, s = e ? this.removeListener : this.addListener,
            o = e ? this.removeListeners : this.addListeners;
        if ("object" != typeof t || t instanceof RegExp)
            for (i = n.length; i--;) s.call(this, t, n[i]);
        else
            for (i in t) t.hasOwnProperty(i) && (r = t[i]) && ("function" == typeof r ? s.call(this, i, r) : o.call(this, i, r));
        return this
    }, i.removeEvent = function(e) {
        var t, n = typeof e,
            i = this._getEvents();
        if ("string" === n) delete i[e];
        else if ("object" === n)
            for (t in i) i.hasOwnProperty(t) && e.test(t) && delete i[t];
        else delete this._events;
        return this
    }, i.emitEvent = function(e, t) {
        var n, i, r, s = this.getListenersAsObject(e);
        for (i in s)
            if (s.hasOwnProperty(i))
                for (n = s[i].length; n--;) r = t ? s[i][n].apply(null, t) : s[i][n](), r === !0 && this.removeListener(e, s[i][n]);
        return this
    }, i.trigger = i.emitEvent, i.emit = function(e) {
        var t = Array.prototype.slice.call(arguments, 1);
        return this.emitEvent(e, t)
    }, "function" == typeof define && define.amd ? define(function() {
        return t
    }) : e.EventEmitter = t
})(this),
function(e) {
    "use strict";
    var t = document.documentElement,
        n = function() {};
    t.addEventListener ? n = function(e, t, n) {
        e.addEventListener(t, n, !1)
    } : t.attachEvent && (n = function(t, n, i) {
        t[n + i] = i.handleEvent ? function() {
            var t = e.event;
            t.target = t.target || t.srcElement, i.handleEvent.call(i, t)
        } : function() {
            var n = e.event;
            n.target = n.target || n.srcElement, i.call(t, n)
        }, t.attachEvent("on" + n, t[n + i])
    });
    var i = function() {};
    t.removeEventListener ? i = function(e, t, n) {
        e.removeEventListener(t, n, !1)
    } : t.detachEvent && (i = function(e, t, n) {
        e.detachEvent("on" + t, e[t + n]);
        try {
            delete e[t + n]
        } catch (i) {
            e[t + n] = void 0
        }
    });
    var r = {
        bind: n,
        unbind: i
    };
    "function" == typeof define && define.amd ? define(r) : e.eventie = r
}(this),
function(e) {
    "use strict";

    function t(e, t) {
        for (var n in t) e[n] = t[n];
        return e
    }

    function n(e) {
        return "[object Array]" === a.call(e)
    }

    function i(e) {
        var t = [];
        if (n(e)) t = e;
        else if ("number" == typeof e.length)
            for (var i = 0, r = e.length; r > i; i++) t.push(e[i]);
        else t.push(e);
        return t
    }

    function r(e, n) {
        function r(e, n, o) {
            if (!(this instanceof r)) return new r(e, n);
            "string" == typeof e && (e = document.querySelectorAll(e)), this.elements = i(e), this.options = t({}, this.options), "function" == typeof n ? o = n : t(this.options, n), o && this.on("always", o), this.getImages(), s && (this.jqDeferred = new s.Deferred);
            var h = this;
            setTimeout(function() {
                h.check()
            })
        }

        function a(e) {
            this.img = e
        }
        r.prototype = new e, r.prototype.options = {}, r.prototype.getImages = function() {
            this.images = [];
            for (var e = 0, t = this.elements.length; t > e; e++) {
                var n = this.elements[e];
                "IMG" === n.nodeName && this.addImage(n);
                for (var i = n.querySelectorAll("img"), r = 0, s = i.length; s > r; r++) {
                    var o = i[r];
                    this.addImage(o)
                }
            }
        }, r.prototype.addImage = function(e) {
            var t = new a(e);
            this.images.push(t)
        }, r.prototype.check = function() {
            function e(e, r) {
                return t.options.debug && h && o.log("confirm", e, r), t.progress(e), n++, n === i && t.complete(), !0
            }
            var t = this,
                n = 0,
                i = this.images.length;
            this.hasAnyBroken = !1;
            for (var r = 0; i > r; r++) {
                var s = this.images[r];
                s.on("confirm", e), s.check()
            }
        }, r.prototype.progress = function(e) {
            this.hasAnyBroken = this.hasAnyBroken || !e.isLoaded, this.emit("progress", this, e), this.jqDeferred && this.jqDeferred.notify(this, e)
        }, r.prototype.complete = function() {
            var e = this.hasAnyBroken ? "fail" : "done";
            if (this.isComplete = !0, this.emit(e, this), this.emit("always", this), this.jqDeferred) {
                var t = this.hasAnyBroken ? "reject" : "resolve";
                this.jqDeferred[t](this)
            }
        }, s && (s.fn.imagesLoaded = function(e, t) {
            var n = new r(this, e, t);
            return n.jqDeferred.promise(s(this))
        });
        var f = {};
        return a.prototype = new e, a.prototype.check = function() {
            var e = f[this.img.src];
            if (e) return this.useCached(e), void 0;
            if (f[this.img.src] = this, this.img.complete && void 0 !== this.img.naturalWidth) return this.confirm(0 !== this.img.naturalWidth, "naturalWidth"), void 0;
            var t = this.proxyImage = new Image;
            n.bind(t, "load", this), n.bind(t, "error", this), t.src = this.img.src
        }, a.prototype.useCached = function(e) {
            if (e.isConfirmed) this.confirm(e.isLoaded, "cached was confirmed");
            else {
                var t = this;
                e.on("confirm", function(e) {
                    return t.confirm(e.isLoaded, "cache emitted confirmed"), !0
                })
            }
        }, a.prototype.confirm = function(e, t) {
            this.isConfirmed = !0, this.isLoaded = e, this.emit("confirm", this, t)
        }, a.prototype.handleEvent = function(e) {
            var t = "on" + e.type;
            this[t] && this[t](e)
        }, a.prototype.onload = function() {
            this.confirm(!0, "onload"), this.unbindProxyEvents()
        }, a.prototype.onerror = function() {
            this.confirm(!1, "onerror"), this.unbindProxyEvents()
        }, a.prototype.unbindProxyEvents = function() {
            n.unbind(this.proxyImage, "load", this), n.unbind(this.proxyImage, "error", this)
        }, r
    }
    var s = e.jQuery,
        o = e.console,
        h = o !== void 0,
        a = Object.prototype.toString;
    "function" == typeof define && define.amd ? define(["eventEmitter", "eventie"], r) : e.imagesLoaded = r(e.EventEmitter, e.eventie)
}(window);
(function(window, document, $, undefined) {
    "use strict";
    var W = $(window),
        D = $(document),
        F = $.fancybox = function() {
            F.open.apply(this, arguments)
        },
        didUpdate = null,
        isTouch = document.createTouch !== undefined,
        isQuery = function(obj) {
            return obj && obj.hasOwnProperty && obj instanceof $
        },
        isString = function(str) {
            return str && $.type(str) === "string"
        },
        isPercentage = function(str) {
            return isString(str) && str.indexOf("%") > 0
        },
        isScrollable = function(el) {
            return el && !(el.style.overflow && el.style.overflow === "hidden") && (el.clientWidth && el.scrollWidth > el.clientWidth || el.clientHeight && el.scrollHeight > el.clientHeight)
        },
        getScalar = function(orig, dim) {
            var value = parseInt(orig, 10) || 0;
            if (dim && isPercentage(orig)) {
                value = F.getViewport()[dim] / 100 * value
            }
            return Math.ceil(value)
        },
        getValue = function(value, dim) {
            return getScalar(value, dim) + "px"
        };
    $.extend(F, {
        version: "2.1.3",
        defaults: {
            padding: 15,
            margin: 40,
            width: 800,
            height: 600,
            minWidth: 100,
            minHeight: 100,
            maxWidth: 9999,
            maxHeight: 9999,
            autoSize: true,
            autoHeight: false,
            autoWidth: false,
            autoResize: true,
            autoCenter: !isTouch,
            fitToView: true,
            aspectRatio: false,
            topRatio: .5,
            leftRatio: .5,
            scrolling: "auto",
            wrapCSS: "",
            arrows: true,
            closeBtn: true,
            closeClick: false,
            nextClick: false,
            mouseWheel: true,
            autoPlay: false,
            playSpeed: 3e3,
            preload: 3,
            modal: false,
            loop: true,
            ajax: {
                dataType: "html",
                headers: {
                    "X-fancyBox": true
                }
            },
            iframe: {
                scrolling: "auto",
                preload: true
            },
            swf: {
                wmode: "transparent",
                allowfullscreen: "true",
                allowscriptaccess: "always"
            },
            keys: {
                next: {
                    13: "left",
                    34: "up",
                    39: "left",
                    40: "up"
                },
                prev: {
                    8: "right",
                    33: "down",
                    37: "right",
                    38: "down"
                },
                close: [27],
                play: [32],
                toggle: [70]
            },
            direction: {
                next: "left",
                prev: "right"
            },
            scrollOutside: true,
            index: 0,
            type: null,
            href: null,
            content: null,
            title: null,
            tpl: {
                wrap: '<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',
                image: '<img class="fancybox-image" src="{href}" alt="" />',
                iframe: '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen' + ($.browser.msie ? ' allowtransparency="true"' : "") + "></iframe>",
                error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
                closeBtn: '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',
                next: '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
                prev: '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
            },
            openEffect: "fade",
            openSpeed: 250,
            openEasing: "swing",
            openOpacity: true,
            openMethod: "zoomIn",
            closeEffect: "fade",
            closeSpeed: 250,
            closeEasing: "swing",
            closeOpacity: true,
            closeMethod: "zoomOut",
            nextEffect: "elastic",
            nextSpeed: 250,
            nextEasing: "swing",
            nextMethod: "changeIn",
            prevEffect: "elastic",
            prevSpeed: 250,
            prevEasing: "swing",
            prevMethod: "changeOut",
            helpers: {
                overlay: true,
                title: true
            },
            onCancel: $.noop,
            beforeLoad: $.noop,
            afterLoad: $.noop,
            beforeShow: $.noop,
            afterShow: $.noop,
            beforeChange: $.noop,
            beforeClose: $.noop,
            afterClose: $.noop
        },
        group: {},
        opts: {},
        previous: null,
        coming: null,
        current: null,
        isActive: false,
        isOpen: false,
        isOpened: false,
        wrap: null,
        skin: null,
        outer: null,
        inner: null,
        player: {
            timer: null,
            isActive: false
        },
        ajaxLoad: null,
        imgPreload: null,
        transitions: {},
        helpers: {},
        open: function(group, opts) {
            if (!group) {
                return
            }
            if (!$.isPlainObject(opts)) {
                opts = {}
            }
            if (false === F.close(true)) {
                return
            }
            if (!$.isArray(group)) {
                group = isQuery(group) ? $(group).get() : [group]
            }
            $.each(group, function(i, element) {
                var obj = {},
                    href, title, content, type, rez, hrefParts, selector;
                if ($.type(element) === "object") {
                    if (element.nodeType) {
                        element = $(element)
                    }
                    if (isQuery(element)) {
                        obj = {
                            href: element.data("fancybox-href") || element.attr("href"),
                            title: element.data("fancybox-title") || element.attr("title"),
                            isDom: true,
                            element: element
                        };
                        if ($.metadata) {
                            $.extend(true, obj, element.metadata())
                        }
                    } else {
                        obj = element
                    }
                }
                href = opts.href || obj.href || (isString(element) ? element : null);
                title = opts.title !== undefined ? opts.title : obj.title || "";
                content = opts.content || obj.content;
                type = content ? "html" : opts.type || obj.type;
                if (!type && obj.isDom) {
                    type = element.data("fancybox-type");
                    if (!type) {
                        rez = element.prop("class").match(/fancybox\.(\w+)/);
                        type = rez ? rez[1] : null
                    }
                }
                if (isString(href)) {
                    if (!type) {
                        if (F.isImage(href)) {
                            type = "image"
                        } else if (F.isSWF(href)) {
                            type = "swf"
                        } else if (href.charAt(0) === "#") {
                            type = "inline"
                        } else if (isString(element)) {
                            type = "html";
                            content = element
                        }
                    }
                    if (type === "ajax") {
                        hrefParts = href.split(/\s+/, 2);
                        href = hrefParts.shift();
                        selector = hrefParts.shift()
                    }
                }
                if (!content) {
                    if (type === "inline") {
                        if (href) {
                            content = $(isString(href) ? href.replace(/.*(?=#[^\s]+$)/, "") : href)
                        } else if (obj.isDom) {
                            content = element
                        }
                    } else if (type === "html") {
                        content = href
                    } else if (!type && !href && obj.isDom) {
                        type = "inline";
                        content = element
                    }
                }
                $.extend(obj, {
                    href: href,
                    type: type,
                    content: content,
                    title: title,
                    selector: selector
                });
                group[i] = obj
            });
            F.opts = $.extend(true, {}, F.defaults, opts);
            if (opts.keys !== undefined) {
                F.opts.keys = opts.keys ? $.extend({}, F.defaults.keys, opts.keys) : false
            }
            F.group = group;
            return F._start(F.opts.index)
        },
        cancel: function() {
            var coming = F.coming;
            if (!coming || false === F.trigger("onCancel")) {
                return
            }
            F.hideLoading();
            if (F.ajaxLoad) {
                F.ajaxLoad.abort()
            }
            F.ajaxLoad = null;
            if (F.imgPreload) {
                F.imgPreload.onload = F.imgPreload.onerror = null
            }
            if (coming.wrap) {
                coming.wrap.stop(true, true).trigger("onReset").remove()
            }
            F.coming = null;
            if (!F.current) {
                F._afterZoomOut(coming)
            }
        },
        close: function(event) {
            F.cancel();
            if (false === F.trigger("beforeClose")) {
                return
            }
            F.unbindEvents();
            if (!F.isActive) {
                return
            }
            if (!F.isOpen || event === true) {
                $(".fancybox-wrap").stop(true).trigger("onReset").remove();
                F._afterZoomOut()
            } else {
                F.isOpen = F.isOpened = false;
                F.isClosing = true;
                $(".fancybox-item, .fancybox-nav").remove();
                F.wrap.stop(true, true).removeClass("fancybox-opened");
                F.transitions[F.current.closeMethod]()
            }
        },
        play: function(action) {
            var clear = function() {
                    clearTimeout(F.player.timer)
                },
                set = function() {
                    clear();
                    if (F.current && F.player.isActive) {
                        F.player.timer = setTimeout(F.next, F.current.playSpeed)
                    }
                },
                stop = function() {
                    clear();
                    $("body").unbind(".player");
                    F.player.isActive = false;
                    F.trigger("onPlayEnd")
                },
                start = function() {
                    if (F.current && (F.current.loop || F.current.index < F.group.length - 1)) {
                        F.player.isActive = true;
                        $("body").bind({
                            "afterShow.player onUpdate.player": set,
                            "onCancel.player beforeClose.player": stop,
                            "beforeLoad.player": clear
                        });
                        set();
                        F.trigger("onPlayStart")
                    }
                };
            if (action === true || !F.player.isActive && action !== false) {
                start()
            } else {
                stop()
            }
        },
        next: function(direction) {
            var current = F.current;
            if (current) {
                if (!isString(direction)) {
                    direction = current.direction.next
                }
                F.jumpto(current.index + 1, direction, "next")
            }
        },
        prev: function(direction) {
            var current = F.current;
            if (current) {
                if (!isString(direction)) {
                    direction = current.direction.prev
                }
                F.jumpto(current.index - 1, direction, "prev")
            }
        },
        jumpto: function(index, direction, router) {
            var current = F.current;
            if (!current) {
                return
            }
            index = getScalar(index);
            F.direction = direction || current.direction[index >= current.index ? "next" : "prev"];
            F.router = router || "jumpto";
            if (current.loop) {
                if (index < 0) {
                    index = current.group.length + index % current.group.length
                }
                index = index % current.group.length
            }
            if (current.group[index] !== undefined) {
                F.cancel();
                F._start(index)
            }
        },
        reposition: function(e, onlyAbsolute) {
            var current = F.current,
                wrap = current ? current.wrap : null,
                pos;
            if (wrap) {
                pos = F._getPosition(onlyAbsolute);
                if (e && e.type === "scroll") {
                    delete pos.position;
                    wrap.stop(true, true).animate(pos, 200)
                } else {
                    wrap.css(pos);
                    current.pos = $.extend({}, current.dim, pos)
                }
            }
        },
        update: function(e) {
            var type = e && e.type,
                anyway = !type || type === "orientationchange";
            if (anyway) {
                clearTimeout(didUpdate);
                didUpdate = null
            }
            if (!F.isOpen || didUpdate) {
                return
            }
            didUpdate = setTimeout(function() {
                var current = F.current;
                if (!current || F.isClosing) {
                    return
                }
                F.wrap.removeClass("fancybox-tmp");
                if (anyway || type === "load" || type === "resize" && current.autoResize) {
                    F._setDimension()
                }
                if (!(type === "scroll" && current.canShrink)) {
                    F.reposition(e)
                }
                F.trigger("onUpdate");
                didUpdate = null
            }, anyway && !isTouch ? 0 : 300)
        },
        toggle: function(action) {
            if (F.isOpen) {
                F.current.fitToView = $.type(action) === "boolean" ? action : !F.current.fitToView;
                if (isTouch) {
                    F.wrap.removeAttr("style").addClass("fancybox-tmp");
                    F.trigger("onUpdate")
                }
                F.update()
            }
        },
        hideLoading: function() {
            D.unbind(".loading");
            $("#fancybox-loading").remove()
        },
        showLoading: function() {
            var el, viewport;
            F.hideLoading();
            el = $('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo("body");
            D.bind("keydown.loading", function(e) {
                if ((e.which || e.keyCode) === 27) {
                    e.preventDefault();
                    F.cancel()
                }
            });
            if (!F.defaults.fixed) {
                viewport = F.getViewport();
                el.css({
                    position: "absolute",
                    top: viewport.h * .5 + viewport.y,
                    left: viewport.w * .5 + viewport.x
                })
            }
        },
        getViewport: function() {
            var locked = F.current && F.current.locked || false,
                rez = {
                    x: W.scrollLeft(),
                    y: W.scrollTop()
                };
            if (locked) {
                rez.w = locked[0].clientWidth;
                rez.h = locked[0].clientHeight
            } else {
                rez.w = isTouch && window.innerWidth ? window.innerWidth : W.width();
                rez.h = isTouch && window.innerHeight ? window.innerHeight : W.height()
            }
            return rez
        },
        unbindEvents: function() {
            if (F.wrap && isQuery(F.wrap)) {
                F.wrap.unbind(".fb")
            }
            D.unbind(".fb");
            W.unbind(".fb")
        },
        bindEvents: function() {
            var current = F.current,
                keys;
            if (!current) {
                return
            }
            W.bind("orientationchange.fb" + (isTouch ? "" : " resize.fb") + (current.autoCenter && !current.locked ? " scroll.fb" : ""), F.update);
            keys = current.keys;
            if (keys) {
                D.bind("keydown.fb", function(e) {
                    var code = e.which || e.keyCode,
                        target = e.target || e.srcElement;
                    if (code === 27 && F.coming) {
                        return false
                    }
                    if (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey && !(target && (target.type || $(target).is("[contenteditable]")))) {
                        $.each(keys, function(i, val) {
                            if (current.group.length > 1 && val[code] !== undefined) {
                                F[i](val[code]);
                                e.preventDefault();
                                return false
                            }
                            if ($.inArray(code, val) > -1) {
                                F[i]();
                                e.preventDefault();
                                return false
                            }
                        })
                    }
                })
            }
            if ($.fn.mousewheel && current.mouseWheel) {
                F.wrap.bind("mousewheel.fb", function(e, delta, deltaX, deltaY) {
                    var target = e.target || null,
                        parent = $(target),
                        canScroll = false;
                    while (parent.length) {
                        if (canScroll || parent.is(".fancybox-skin") || parent.is(".fancybox-wrap")) {
                            break
                        }
                        canScroll = isScrollable(parent[0]);
                        parent = $(parent).parent()
                    }
                    if (delta !== 0 && !canScroll) {
                        if (F.group.length > 1 && !current.canShrink) {
                            if (deltaY > 0 || deltaX > 0) {
                                F.prev(deltaY > 0 ? "down" : "left")
                            } else if (deltaY < 0 || deltaX < 0) {
                                F.next(deltaY < 0 ? "up" : "right")
                            }
                            e.preventDefault()
                        }
                    }
                })
            }
        },
        trigger: function(event, o) {
            var ret, obj = o || F.coming || F.current;
            if (!obj) {
                return
            }
            if ($.isFunction(obj[event])) {
                ret = obj[event].apply(obj, Array.prototype.slice.call(arguments, 1))
            }
            if (ret === false) {
                return false
            }
            if (obj.helpers) {
                $.each(obj.helpers, function(helper, opts) {
                    if (opts && F.helpers[helper] && $.isFunction(F.helpers[helper][event])) {
                        opts = $.extend(true, {}, F.helpers[helper].defaults, opts);
                        F.helpers[helper][event](opts, obj)
                    }
                })
            }
            $.event.trigger(event + ".fb")
        },
        isImage: function(str) {
            return isString(str) && str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)
        },
        isSWF: function(str) {
            return isString(str) && str.match(/\.(swf)((\?|#).*)?$/i)
        },
        _start: function(index) {
            var coming = {},
                obj, href, type, margin, padding;
            index = getScalar(index);
            obj = F.group[index] || null;
            if (!obj) {
                return false
            }
            coming = $.extend(true, {}, F.opts, obj);
            margin = coming.margin;
            padding = coming.padding;
            if ($.type(margin) === "number") {
                coming.margin = [margin, margin, margin, margin]
            }
            if ($.type(padding) === "number") {
                coming.padding = [padding, padding, padding, padding]
            }
            if (coming.modal) {
                $.extend(true, coming, {
                    closeBtn: false,
                    closeClick: false,
                    nextClick: false,
                    arrows: false,
                    mouseWheel: false,
                    keys: null,
                    helpers: {
                        overlay: {
                            closeClick: false
                        }
                    }
                })
            }
            if (coming.autoSize) {
                coming.autoWidth = coming.autoHeight = true
            }
            if (coming.width === "auto") {
                coming.autoWidth = true
            }
            if (coming.height === "auto") {
                coming.autoHeight = true
            }
            coming.group = F.group;
            coming.index = index;
            F.coming = coming;
            if (false === F.trigger("beforeLoad")) {
                F.coming = null;
                return
            }
            type = coming.type;
            href = coming.href;
            if (!type) {
                F.coming = null;
                if (F.current && F.router && F.router !== "jumpto") {
                    F.current.index = index;
                    return F[F.router](F.direction)
                }
                return false
            }
            F.isActive = true;
            if (type === "image" || type === "swf") {
                coming.autoHeight = coming.autoWidth = false;
                coming.scrolling = "visible"
            }
            if (type === "image") {
                coming.aspectRatio = true
            }
            if (type === "iframe" && isTouch) {
                coming.scrolling = "scroll"
            }
            coming.wrap = $(coming.tpl.wrap).addClass("fancybox-" + (isTouch ? "mobile" : "desktop") + " fancybox-type-" + type + " fancybox-tmp " + coming.wrapCSS).appendTo(coming.parent || "body");
            $.extend(coming, {
                skin: $(".fancybox-skin", coming.wrap),
                outer: $(".fancybox-outer", coming.wrap),
                inner: $(".fancybox-inner", coming.wrap)
            });
            $.each(["Top", "Right", "Bottom", "Left"], function(i, v) {
                coming.skin.css("padding" + v, getValue(coming.padding[i]))
            });
            F.trigger("onReady");
            if (type === "inline" || type === "html") {
                if (!coming.content || !coming.content.length) {
                    return F._error("content")
                }
            } else if (!href) {
                return F._error("href")
            }
            if (type === "image") {
                F._loadImage()
            } else if (type === "ajax") {
                F._loadAjax()
            } else if (type === "iframe") {
                F._loadIframe()
            } else {
                F._afterLoad()
            }
        },
        _error: function(type) {
            $.extend(F.coming, {
                type: "html",
                autoWidth: true,
                autoHeight: true,
                minWidth: 0,
                minHeight: 0,
                scrolling: "no",
                hasError: type,
                content: F.coming.tpl.error
            });
            F._afterLoad()
        },
        _loadImage: function() {
            var img = F.imgPreload = new Image;
            img.onload = function() {
                this.onload = this.onerror = null;
                F.coming.width = this.width;
                F.coming.height = this.height;
                F._afterLoad()
            };
            img.onerror = function() {
                this.onload = this.onerror = null;
                F._error("image")
            };
            img.src = F.coming.href;
            if (img.complete !== true) {
                F.showLoading()
            }
        },
        _loadAjax: function() {
            var coming = F.coming;
            F.showLoading();
            F.ajaxLoad = $.ajax($.extend({}, coming.ajax, {
                url: coming.href,
                error: function(jqXHR, textStatus) {
                    if (F.coming && textStatus !== "abort") {
                        F._error("ajax", jqXHR)
                    } else {
                        F.hideLoading()
                    }
                },
                success: function(data, textStatus) {
                    if (textStatus === "success") {
                        coming.content = data;
                        F._afterLoad()
                    }
                }
            }))
        },
        _loadIframe: function() {
            var coming = F.coming,
                iframe = $(coming.tpl.iframe.replace(/\{rnd\}/g, (new Date).getTime())).attr("scrolling", isTouch ? "auto" : coming.iframe.scrolling).attr("src", coming.href);
            $(coming.wrap).bind("onReset", function() {
                try {
                    $(this).find("iframe").hide().attr("src", "//about:blank").end().empty()
                } catch (e) {}
            });
            if (coming.iframe.preload) {
                F.showLoading();
                iframe.one("load", function() {
                    $(this).data("ready", 1);
                    if (!isTouch) {
                        $(this).bind("load.fb", F.update)
                    }
                    $(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();
                    F._afterLoad()
                })
            }
            coming.content = iframe.appendTo(coming.inner);
            if (!coming.iframe.preload) {
                F._afterLoad()
            }
        },
        _preloadImages: function() {
            var group = F.group,
                current = F.current,
                len = group.length,
                cnt = current.preload ? Math.min(current.preload, len - 1) : 0,
                item, i;
            for (i = 1; i <= cnt; i += 1) {
                item = group[(current.index + i) % len];
                if (item.type === "image" && item.href) {
                    (new Image).src = item.href
                }
            }
        },
        _afterLoad: function() {
            var coming = F.coming,
                previous = F.current,
                placeholder = "fancybox-placeholder",
                current, content, type, scrolling, href, embed;
            F.hideLoading();
            if (!coming || F.isActive === false) {
                return
            }
            if (false === F.trigger("afterLoad", coming, previous)) {
                coming.wrap.stop(true).trigger("onReset").remove();
                F.coming = null;
                return
            }
            if (previous) {
                F.trigger("beforeChange", previous);
                previous.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()
            }
            F.unbindEvents();
            current = coming;
            content = coming.content;
            type = coming.type;
            scrolling = coming.scrolling;
            $.extend(F, {
                wrap: current.wrap,
                skin: current.skin,
                outer: current.outer,
                inner: current.inner,
                current: current,
                previous: previous
            });
            href = current.href;
            switch (type) {
                case "inline":
                case "ajax":
                case "html":
                    if (current.selector) {
                        content = $("<div>").html(content).find(current.selector)
                    } else if (isQuery(content)) {
                        if (!content.data(placeholder)) {
                            content.data(placeholder, $('<div class="' + placeholder + '"></div>').insertAfter(content).hide())
                        }
                        content = content.show().detach();
                        current.wrap.bind("onReset", function() {
                            if ($(this).find(content).length) {
                                content.hide().replaceAll(content.data(placeholder)).data(placeholder, false)
                            }
                        })
                    }
                    break;
                case "image":
                    content = current.tpl.image.replace("{href}", href);
                    break;
                case "swf":
                    content = '<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="' + href + '"></param>';
                    embed = "";
                    $.each(current.swf, function(name, val) {
                        content += '<param name="' + name + '" value="' + val + '"></param>';
                        embed += " " + name + '="' + val + '"'
                    });
                    content += '<embed src="' + href + '" type="application/x-shockwave-flash" width="100%" height="100%"' + embed + "></embed></object>";
                    break
            }
            if (!(isQuery(content) && content.parent().is(current.inner))) {
                current.inner.append(content)
            }
            F.trigger("beforeShow");
            current.inner.css("overflow", scrolling === "yes" ? "scroll" : scrolling === "no" ? "hidden" : scrolling);
            F._setDimension();
            F.reposition();
            F.isOpen = false;
            F.coming = null;
            F.bindEvents();
            if (!F.isOpened) {
                $(".fancybox-wrap").not(current.wrap).stop(true).trigger("onReset").remove()
            } else if (previous.prevMethod) {
                F.transitions[previous.prevMethod]()
            }
            F.transitions[F.isOpened ? current.nextMethod : current.openMethod]();
            F._preloadImages()
        },
        _setDimension: function() {
            var viewport = F.getViewport(),
                steps = 0,
                canShrink = false,
                canExpand = false,
                wrap = F.wrap,
                skin = F.skin,
                inner = F.inner,
                current = F.current,
                width = current.width,
                height = current.height,
                minWidth = current.minWidth,
                minHeight = current.minHeight,
                maxWidth = current.maxWidth,
                maxHeight = current.maxHeight,
                scrolling = current.scrolling,
                scrollOut = current.scrollOutside ? current.scrollbarWidth : 0,
                margin = current.margin,
                wMargin = getScalar(margin[1] + margin[3]),
                hMargin = getScalar(margin[0] + margin[2]),
                wPadding, hPadding, wSpace, hSpace, origWidth, origHeight, origMaxWidth, origMaxHeight, ratio, width_, height_, maxWidth_, maxHeight_, iframe, body;
            wrap.add(skin).add(inner).width("auto").height("auto").removeClass("fancybox-tmp");
            wPadding = getScalar(skin.outerWidth(true) - skin.width());
            hPadding = getScalar(skin.outerHeight(true) - skin.height());
            wSpace = wMargin + wPadding;
            hSpace = hMargin + hPadding;
            origWidth = isPercentage(width) ? (viewport.w - wSpace) * getScalar(width) / 100 : width;
            origHeight = isPercentage(height) ? (viewport.h - hSpace) * getScalar(height) / 100 : height;
            if (current.type === "iframe") {
                iframe = current.content;
                if (current.autoHeight && iframe.data("ready") === 1) {
                    try {
                        if (iframe[0].contentWindow.document.location) {
                            inner.width(origWidth).height(9999);
                            body = iframe.contents().find("body");
                            if (scrollOut) {
                                body.css("overflow-x", "hidden")
                            }
                            origHeight = body.height()
                        }
                    } catch (e) {}
                }
            } else if (current.autoWidth || current.autoHeight) {
                inner.addClass("fancybox-tmp");
                if (!current.autoWidth) {
                    inner.width(origWidth)
                }
                if (!current.autoHeight) {
                    inner.height(origHeight)
                }
                if (current.autoWidth) {
                    origWidth = inner.width()
                }
                if (current.autoHeight) {
                    origHeight = inner.height()
                }
                inner.removeClass("fancybox-tmp")
            }
            width = getScalar(origWidth);
            height = getScalar(origHeight);
            ratio = origWidth / origHeight;
            minWidth = getScalar(isPercentage(minWidth) ? getScalar(minWidth, "w") - wSpace : minWidth);
            maxWidth = getScalar(isPercentage(maxWidth) ? getScalar(maxWidth, "w") - wSpace : maxWidth);
            minHeight = getScalar(isPercentage(minHeight) ? getScalar(minHeight, "h") - hSpace : minHeight);
            maxHeight = getScalar(isPercentage(maxHeight) ? getScalar(maxHeight, "h") - hSpace : maxHeight);
            origMaxWidth = maxWidth;
            origMaxHeight = maxHeight;
            if (current.fitToView) {
                maxWidth = Math.min(viewport.w - wSpace, maxWidth);
                maxHeight = Math.min(viewport.h - hSpace, maxHeight)
            }
            maxWidth_ = viewport.w - wMargin;
            maxHeight_ = viewport.h - hMargin;
            if (current.aspectRatio) {
                if (width > maxWidth) {
                    width = maxWidth;
                    height = getScalar(width / ratio)
                }
                if (height > maxHeight) {
                    height = maxHeight;
                    width = getScalar(height * ratio)
                }
                if (width < minWidth) {
                    width = minWidth;
                    height = getScalar(width / ratio)
                }
                if (height < minHeight) {
                    height = minHeight;
                    width = getScalar(height * ratio)
                }
            } else {
                width = Math.max(minWidth, Math.min(width, maxWidth));
                if (current.autoHeight && current.type !== "iframe") {
                    inner.width(width);
                    height = inner.height()
                }
                height = Math.max(minHeight, Math.min(height, maxHeight))
            }
            if (current.fitToView) {
                inner.width(width).height(height);
                wrap.width(width + wPadding);
                width_ = wrap.width();
                height_ = wrap.height();
                if (current.aspectRatio) {
                    while ((width_ > maxWidth_ || height_ > maxHeight_) && width > minWidth && height > minHeight) {
                        if (steps++ > 19) {
                            break
                        }
                        height = Math.max(minHeight, Math.min(maxHeight, height - 10));
                        width = getScalar(height * ratio);
                        if (width < minWidth) {
                            width = minWidth;
                            height = getScalar(width / ratio)
                        }
                        if (width > maxWidth) {
                            width = maxWidth;
                            height = getScalar(width / ratio)
                        }
                        inner.width(width).height(height);
                        wrap.width(width + wPadding);
                        width_ = wrap.width();
                        height_ = wrap.height()
                    }
                } else {
                    width = Math.max(minWidth, Math.min(width, width - (width_ - maxWidth_)));
                    height = Math.max(minHeight, Math.min(height, height - (height_ - maxHeight_)))
                }
            }
            if (scrollOut && scrolling === "auto" && height < origHeight && width + wPadding + scrollOut < maxWidth_) {
                width += scrollOut
            }
            inner.width(width).height(height);
            wrap.width(width + wPadding);
            width_ = wrap.width();
            height_ = wrap.height();
            canShrink = (width_ > maxWidth_ || height_ > maxHeight_) && width > minWidth && height > minHeight;
            canExpand = current.aspectRatio ? width < origMaxWidth && height < origMaxHeight && width < origWidth && height < origHeight : (width < origMaxWidth || height < origMaxHeight) && (width < origWidth || height < origHeight);
            $.extend(current, {
                dim: {
                    width: getValue(width_),
                    height: getValue(height_)
                },
                origWidth: origWidth,
                origHeight: origHeight,
                canShrink: canShrink,
                canExpand: canExpand,
                wPadding: wPadding,
                hPadding: hPadding,
                wrapSpace: height_ - skin.outerHeight(true),
                skinSpace: skin.height() - height
            });
            if (!iframe && current.autoHeight && height > minHeight && height < maxHeight && !canExpand) {
                inner.height("auto")
            }
        },
        _getPosition: function(onlyAbsolute) {
            var current = F.current,
                viewport = F.getViewport(),
                margin = current.margin,
                width = F.wrap.width() + margin[1] + margin[3],
                height = F.wrap.height() + margin[0] + margin[2],
                rez = {
                    position: "absolute",
                    top: margin[0],
                    left: margin[3]
                };
            if (current.autoCenter && current.fixed && !onlyAbsolute && height <= viewport.h && width <= viewport.w) {
                rez.position = "fixed"
            } else if (!current.locked) {
                rez.top += viewport.y;
                rez.left += viewport.x
            }
            rez.top = getValue(Math.max(rez.top, rez.top + (viewport.h - height) * current.topRatio));
            rez.left = getValue(Math.max(rez.left, rez.left + (viewport.w - width) * current.leftRatio));
            return rez
        },
        _afterZoomIn: function() {
            var current = F.current;
            if (!current) {
                return
            }
            F.isOpen = F.isOpened = true;
            F.wrap.css("overflow", "visible").addClass("fancybox-opened");
            F.update();
            if (current.closeClick || current.nextClick && F.group.length > 1) {
                F.inner.css("cursor", "pointer").bind("click.fb", function(e) {
                    if (!$(e.target).is("a") && !$(e.target).parent().is("a")) {
                        e.preventDefault();
                        F[current.closeClick ? "close" : "next"]()
                    }
                })
            }
            if (current.closeBtn) {
                $(current.tpl.closeBtn).appendTo(F.skin).bind(isTouch ? "touchstart.fb" : "click.fb", function(e) {
                    e.preventDefault();
                    F.close()
                })
            }
            if (current.arrows && F.group.length > 1) {
                if (current.loop || current.index > 0) {
                    $(current.tpl.prev).appendTo(F.outer).bind("click.fb", F.prev)
                }
                if (current.loop || current.index < F.group.length - 1) {
                    $(current.tpl.next).appendTo(F.outer).bind("click.fb", F.next)
                }
            }
            F.trigger("afterShow");
            if (!current.loop && current.index === current.group.length - 1) {
                F.play(false)
            } else if (F.opts.autoPlay && !F.player.isActive) {
                F.opts.autoPlay = false;
                F.play()
            }
        },
        _afterZoomOut: function(obj) {
            obj = obj || F.current;
            $(".fancybox-wrap").trigger("onReset").remove();
            $.extend(F, {
                group: {},
                opts: {},
                router: false,
                current: null,
                isActive: false,
                isOpened: false,
                isOpen: false,
                isClosing: false,
                wrap: null,
                skin: null,
                outer: null,
                inner: null
            });
            F.trigger("afterClose", obj)
        }
    });
    F.transitions = {
        getOrigPosition: function() {
            var current = F.current,
                element = current.element,
                orig = current.orig,
                pos = {},
                width = 50,
                height = 50,
                hPadding = current.hPadding,
                wPadding = current.wPadding,
                viewport = F.getViewport();
            if (!orig && current.isDom && element.is(":visible")) {
                orig = element.find("img:first");
                if (!orig.length) {
                    orig = element
                }
            }
            if (isQuery(orig)) {
                pos = orig.offset();
                if (orig.is("img")) {
                    width = orig.outerWidth();
                    height = orig.outerHeight()
                }
            } else {
                pos.top = viewport.y + (viewport.h - height) * current.topRatio;
                pos.left = viewport.x + (viewport.w - width) * current.leftRatio
            }
            if (F.wrap.css("position") === "fixed" || current.locked) {
                pos.top -= viewport.y;
                pos.left -= viewport.x
            }
            pos = {
                top: getValue(pos.top - hPadding * current.topRatio),
                left: getValue(pos.left - wPadding * current.leftRatio),
                width: getValue(width + wPadding),
                height: getValue(height + hPadding)
            };
            return pos
        },
        step: function(now, fx) {
            var ratio, padding, value, prop = fx.prop,
                current = F.current,
                wrapSpace = current.wrapSpace,
                skinSpace = current.skinSpace;
            if (prop === "width" || prop === "height") {
                ratio = fx.end === fx.start ? 1 : (now - fx.start) / (fx.end - fx.start);
                if (F.isClosing) {
                    ratio = 1 - ratio
                }
                padding = prop === "width" ? current.wPadding : current.hPadding;
                value = now - padding;
                F.skin[prop](getScalar(prop === "width" ? value : value - wrapSpace * ratio));
                F.inner[prop](getScalar(prop === "width" ? value : value - wrapSpace * ratio - skinSpace * ratio))
            }
        },
        zoomIn: function() {
            var current = F.current,
                startPos = current.pos,
                effect = current.openEffect,
                elastic = effect === "elastic",
                endPos = $.extend({
                    opacity: 1
                }, startPos);
            delete endPos.position;
            if (elastic) {
                startPos = this.getOrigPosition();
                if (current.openOpacity) {
                    startPos.opacity = .1
                }
            } else if (effect === "fade") {
                startPos.opacity = .1
            }
            F.wrap.css(startPos).animate(endPos, {
                duration: effect === "none" ? 0 : current.openSpeed,
                easing: current.openEasing,
                step: elastic ? this.step : null,
                complete: F._afterZoomIn
            })
        },
        zoomOut: function() {
            var current = F.current,
                effect = current.closeEffect,
                elastic = effect === "elastic",
                endPos = {
                    opacity: .1
                };
            if (elastic) {
                endPos = this.getOrigPosition();
                if (current.closeOpacity) {
                    endPos.opacity = .1
                }
            }
            F.wrap.animate(endPos, {
                duration: effect === "none" ? 0 : current.closeSpeed,
                easing: current.closeEasing,
                step: elastic ? this.step : null,
                complete: F._afterZoomOut
            })
        },
        changeIn: function() {
            var current = F.current,
                effect = current.nextEffect,
                startPos = current.pos,
                endPos = {
                    opacity: 1
                },
                direction = F.direction,
                distance = 200,
                field;
            startPos.opacity = .1;
            if (effect === "elastic") {
                field = direction === "down" || direction === "up" ? "top" : "left";
                if (direction === "down" || direction === "right") {
                    startPos[field] = getValue(getScalar(startPos[field]) - distance);
                    endPos[field] = "+=" + distance + "px"
                } else {
                    startPos[field] = getValue(getScalar(startPos[field]) + distance);
                    endPos[field] = "-=" + distance + "px"
                }
            }
            if (effect === "none") {
                F._afterZoomIn()
            } else {
                F.wrap.css(startPos).animate(endPos, {
                    duration: current.nextSpeed,
                    easing: current.nextEasing,
                    complete: function() {
                        setTimeout(F._afterZoomIn, 20)
                    }
                })
            }
        },
        changeOut: function() {
            var previous = F.previous,
                effect = previous.prevEffect,
                endPos = {
                    opacity: .1
                },
                direction = F.direction,
                distance = 200;
            if (effect === "elastic") {
                endPos[direction === "down" || direction === "up" ? "top" : "left"] = (direction === "up" || direction === "left" ? "-" : "+") + "=" + distance + "px"
            }
            previous.wrap.animate(endPos, {
                duration: effect === "none" ? 0 : previous.prevSpeed,
                easing: previous.prevEasing,
                complete: function() {
                    $(this).trigger("onReset").remove()
                }
            })
        }
    };
    F.helpers.overlay = {
        defaults: {
            closeClick: true,
            speedOut: 200,
            showEarly: true,
            css: {},
            locked: !isTouch,
            fixed: true
        },
        overlay: null,
        fixed: false,
        create: function(opts) {
            opts = $.extend({}, this.defaults, opts);
            if (this.overlay) {
                this.close()
            }
            this.overlay = $('<div class="fancybox-overlay"></div>').appendTo("body");
            this.fixed = false;
            if (opts.fixed && F.defaults.fixed) {
                this.overlay.addClass("fancybox-overlay-fixed");
                this.fixed = true
            }
        },
        open: function(opts) {
            var that = this;
            opts = $.extend({}, this.defaults, opts);
            if (this.overlay) {
                this.overlay.unbind(".overlay").width("auto").height("auto")
            } else {
                this.create(opts)
            }
            if (!this.fixed) {
                W.bind("resize.overlay", $.proxy(this.update, this));
                this.update()
            }
            if (opts.closeClick) {
                this.overlay.bind("click.overlay", function(e) {
                    if ($(e.target).hasClass("fancybox-overlay")) {
                        if (F.isActive) {
                            F.close()
                        } else {
                            that.close()
                        }
                    }
                })
            }
            this.overlay.css(opts.css).show()
        },
        close: function() {
            $(".fancybox-overlay").remove();
            W.unbind("resize.overlay");
            this.overlay = null;
            if (this.margin !== false) {
                $("body").css("margin-right", this.margin);
                this.margin = false
            }
            if (this.el) {
                this.el.removeClass("fancybox-lock")
            }
        },
        update: function() {
            var width = "100%",
                offsetWidth;
            this.overlay.width(width).height("100%");
            if ($.browser.msie) {
                offsetWidth = Math.max(document.documentElement.offsetWidth, document.body.offsetWidth);
                if (D.width() > offsetWidth) {
                    width = D.width()
                }
            } else if (D.width() > W.width()) {
                width = D.width()
            }
            this.overlay.width(width).height(D.height())
        },
        onReady: function(opts, obj) {
            $(".fancybox-overlay").stop(true, true);
            if (!this.overlay) {
                this.margin = D.height() > W.height() || $("body").css("overflow-y") === "scroll" ? $("body").css("margin-right") : false;
                this.el = document.all && !document.querySelector ? $("html") : $("body");
                this.create(opts)
            }
            if (opts.locked && this.fixed) {
                obj.locked = this.overlay.append(obj.wrap);
                obj.fixed = false
            }
            if (opts.showEarly === true) {
                this.beforeShow.apply(this, arguments)
            }
        },
        beforeShow: function(opts, obj) {
            if (obj.locked) {
                this.el.addClass("fancybox-lock");
                if (this.margin !== false) {
                    $("body").css("margin-right", getScalar(this.margin) + obj.scrollbarWidth)
                }
            }
            this.open(opts)
        },
        onUpdate: function() {
            if (!this.fixed) {
                this.update()
            }
        },
        afterClose: function(opts) {
            if (this.overlay && !F.isActive) {
                this.overlay.fadeOut(opts.speedOut, $.proxy(this.close, this))
            }
        }
    };
    F.helpers.title = {
        defaults: {
            type: "float",
            position: "bottom"
        },
        beforeShow: function(opts) {
            var current = F.current,
                text = current.title,
                type = opts.type,
                title, target;
            if ($.isFunction(text)) {
                text = text.call(current.element, current)
            }
            if (!isString(text) || $.trim(text) === "") {
                return
            }
            title = $('<div class="fancybox-title fancybox-title-' + type + '-wrap">' + text + "</div>");
            switch (type) {
                case "inside":
                    target = F.skin;
                    break;
                case "outside":
                    target = F.wrap;
                    break;
                case "over":
                    target = F.inner;
                    break;
                default:
                    target = F.skin;
                    title.appendTo("body");
                    if ($.browser.msie) {
                        title.width(title.width())
                    }
                    title.wrapInner('<span class="child"></span>');
                    F.current.margin[2] += Math.abs(getScalar(title.css("margin-bottom")));
                    break
            }
            title[opts.position === "top" ? "prependTo" : "appendTo"](target)
        }
    };
    $.fn.fancybox = function(options) {
        var index, that = $(this),
            selector = this.selector || "",
            run = function(e) {
                var what = $(this).blur(),
                    idx = index,
                    relType, relVal;
                if (!(e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) && !what.is(".fancybox-wrap")) {
                    relType = options.groupAttr || "data-fancybox-group";
                    relVal = what.attr(relType);
                    if (!relVal) {
                        relType = "rel";
                        relVal = what.get(0)[relType]
                    }
                    if (relVal && relVal !== "" && relVal !== "nofollow") {
                        what = selector.length ? $(selector) : that;
                        what = what.filter("[" + relType + '="' + relVal + '"]');
                        idx = what.index(this)
                    }
                    options.index = idx;
                    if (F.open(what, options) !== false) {
                        e.preventDefault()
                    }
                }
            };
        options = options || {};
        index = options.index || 0;
        if (!selector || options.live === false) {
            that.unbind("click.fb-start").bind("click.fb-start", run)
        } else {
            D.undelegate(selector, "click.fb-start").delegate(selector + ":not('.fancybox-item, .fancybox-nav')", "click.fb-start", run)
        }
        this.filter("[data-fancybox-start=1]").trigger("click");
        return this
    };
    D.ready(function() {
        if ($.scrollbarWidth === undefined) {
            $.scrollbarWidth = function() {
                var parent = $('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),
                    child = parent.children(),
                    width = child.innerWidth() - child.height(99).innerWidth();
                parent.remove();
                return width
            }
        }
        if ($.support.fixedPosition === undefined) {
            $.support.fixedPosition = function() {
                var elem = $('<div style="position:fixed;top:20px;"></div>').appendTo("body"),
                    fixed = elem[0].offsetTop === 20 || elem[0].offsetTop === 15;
                elem.remove();
                return fixed
            }()
        }
        $.extend(F.defaults, {
            scrollbarWidth: $.scrollbarWidth(),
            fixed: $.support.fixedPosition,
            parent: $("body")
        })
    })
})(window, document, jQuery);
(function($) {
    var fls = !1,
        nll = null,
        prsflt = parseFloat,
        mathmn = Math.min,
        rxLastNr = /(-?\d+\.?\d*)$/g,
        aPluginPrepare = [],
        aPluginSort = [];
    $.tinysort = {
        id: "TinySort",
        version: "1.4.29",
        copyright: "Copyright (c) 2008-2012 Ron Valstar",
        uri: "http://tinysort.sjeiti.com/",
        licensed: {
            MIT: "http://www.opensource.org/licenses/mit-license.php",
            GPL: "http://www.gnu.org/licenses/gpl.html"
        },
        plugin: function(prepare, sort) {
            aPluginPrepare.push(prepare);
            aPluginSort.push(sort)
        },
        defaults: {
            order: "asc",
            attr: nll,
            data: nll,
            useVal: fls,
            place: "start",
            returns: fls,
            cases: fls,
            forceStrings: fls,
            sortFunction: nll
        }
    };
    $.fn.extend({
        tinysort: function(_find, _settings) {
            if (_find && typeof _find != "string") {
                _settings = _find;
                _find = nll
            }
            var oSettings = $.extend({}, $.tinysort.defaults, _settings),
                sParent, oThis = this,
                iLen = $(this).length,
                oElements = {},
                bFind = !(!_find || _find == ""),
                bAttr = !(oSettings.attr === nll || oSettings.attr == ""),
                bData = oSettings.data !== nll,
                bFilter = bFind && _find[0] == ":",
                $Filter = bFilter ? oThis.filter(_find) : oThis,
                fnSort = oSettings.sortFunction,
                iAsc = oSettings.order == "asc" ? 1 : -1,
                aNewOrder = [];
            $.each(aPluginPrepare, function(i, fn) {
                fn.call(fn, oSettings)
            });
            if (!fnSort) fnSort = oSettings.order == "rand" ? function() {
                return Math.random() < .5 ? 1 : -1
            } : function(a, b) {
                var bNumeric = fls,
                    sA = !oSettings.cases ? toLowerCase(a.s) : a.s,
                    sB = !oSettings.cases ? toLowerCase(b.s) : b.s;
                if (!oSettings.forceStrings) {
                    var aAnum = sA && sA.match(rxLastNr),
                        aBnum = sB && sB.match(rxLastNr);
                    if (aAnum && aBnum) {
                        var sAprv = sA.substr(0, sA.length - aAnum[0].length),
                            sBprv = sB.substr(0, sB.length - aBnum[0].length);
                        if (sAprv == sBprv) {
                            bNumeric = !fls;
                            sA = prsflt(aAnum[0]);
                            sB = prsflt(aBnum[0])
                        }
                    }
                }
                var iReturn = iAsc * (sA < sB ? -1 : sA > sB ? 1 : 0);
                $.each(aPluginSort, function(i, fn) {
                    iReturn = fn.call(fn, bNumeric, sA, sB, iReturn)
                });
                return iReturn
            };
            oThis.each(function(i, el) {
                var $Elm = $(el),
                    mElmOrSub = bFind ? bFilter ? $Filter.filter(el) : $Elm.find(_find) : $Elm,
                    sSort = bData ? "" + mElmOrSub.data(oSettings.data) : bAttr ? mElmOrSub.attr(oSettings.attr) : oSettings.useVal ? mElmOrSub.val() : mElmOrSub.text(),
                    mParent = $Elm.parent();
                if (!oElements[mParent]) oElements[mParent] = {
                    s: [],
                    n: []
                };
                if (mElmOrSub.length > 0) oElements[mParent].s.push({
                    s: sSort,
                    e: $Elm,
                    n: i
                });
                else oElements[mParent].n.push({
                    e: $Elm,
                    n: i
                })
            });
            for (sParent in oElements) oElements[sParent].s.sort(fnSort);
            for (sParent in oElements) {
                var oParent = oElements[sParent],
                    aOrg = [],
                    iLow = iLen,
                    aCnt = [0, 0],
                    i;
                switch (oSettings.place) {
                    case "first":
                        $.each(oParent.s, function(i, obj) {
                            iLow = mathmn(iLow, obj.n)
                        });
                        break;
                    case "org":
                        $.each(oParent.s, function(i, obj) {
                            aOrg.push(obj.n)
                        });
                        break;
                    case "end":
                        iLow = oParent.n.length;
                        break;
                    default:
                        iLow = 0
                }
                for (i = 0; i < iLen; i++) {
                    var bSList = contains(aOrg, i) ? !fls : i >= iLow && i < iLow + oParent.s.length,
                        mEl = (bSList ? oParent.s : oParent.n)[aCnt[bSList ? 0 : 1]].e;
                    mEl.parent().append(mEl);
                    if (bSList || !oSettings.returns) aNewOrder.push(mEl.get(0));
                    aCnt[bSList ? 0 : 1] ++
                }
            }
            oThis.length = 0;
            Array.prototype.push.apply(oThis, aNewOrder);
            return oThis
        }
    });

    function toLowerCase(s) {
        return s && s.toLowerCase ? s.toLowerCase() : s
    }

    function contains(a, n) {
        for (var i = 0, l = a.length; i < l; i++)
            if (a[i] == n) return !fls;
        return fls
    }
    $.fn.TinySort = $.fn.Tinysort = $.fn.tsort = $.fn.tinysort
})(jQuery);
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function(elt) {
        var len = this.length,
            from = Number(arguments[1]) || 0;
        from = from < 0 ? Math.ceil(from) : Math.floor(from);
        if (from < 0) from += len;
        for (; from < len; from++) {
            if (from in this && this[from] === elt) return from
        }
        return -1
    }
}